repeat wait() until game:IsLoaded() and game.Players.LocalPlayer
--[[===================================================
    LagTeck Hub - v2.0 ULTRA COMPLETO
    Sistema completo com TODAS as funcionalidades
    Blox Fruits | Otimizado para Mobile
=====================================================]]

_G.JoinTime = os.time()

-- =========================
-- SERVI√áOS
-- =========================
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local Lighting = game:GetService("Lighting")
local LocalPlayer = Players.LocalPlayer
local HttpService = game:GetService("HttpService")

-- =========================
-- DETEC√á√ÉO DO SEA
-- =========================
local function GetCurrentSea()
    local placeId = game.PlaceId
    if placeId == 2753915549 then return 1
    elseif placeId == 4442272183 then return 2
    elseif placeId == 7449423635 then return 3
    end
    return 1
end

local Sea = GetCurrentSea()

-- =========================
-- VARI√ÅVEIS GLOBAIS
-- =========================
_G.Settings = {
    -- Auto Farm
    AutoFarmLevel = false,
    AutoFarmBoss = false,
    SelectedBoss = "All",
    AutoChest = false,
    FastAttack = false,
    AutoHaki = false,
    
    -- Frutas
    AutoFruitSniper = false,
    AutoStoreFruit = false,
    AutoBuyFruit = false,
    SelectedFruit = "Leopard-Leopard",
    AutoRandomFruit = false,
    
    -- Armas
    WeaponType = "Nenhum",
    FarmDistance = 30,
    BringMobs = true,
    
    -- Configs
    WalkOnWater = false,
    RemoveFog = false,
    AntiAFK = false,
    
    -- ESP
    ESPFruit = false,
    ESPIsland = false,
    ESPPlayer = false,
    ESPChest = false,
    
    -- Teleport
    SelectedIsland = nil,
    SelectedSea = 1,
    
    -- Sea Events
    AutoKatakuri = false,
    AutoFactory = false,
    AutoSeaBeast = false,
    SelectedBoat = "Usar o que eu estou",
    SelectedSeaEvent = "Sea Beast",
    SeaDepth = "Mar 1",
    CircularMode = false,
    SeaEventActive = false,
    AutoMirage = false,
    AutoVolcano = false,
    AutoLeviathan = false,
    
    -- PVP
    AutoPVP = false,
    SelectedPlayer = nil,
    SafeMode = false,
    
    -- CDK
    AutoGetCDK = false,
    AutoGetSoulGuitar = false,
    
    -- Estilos de Luta
    AutoGetDarkStep = false,
    AutoGetElectric = false,
    AutoGetWaterKungFu = false,
    AutoGetDragonBreath = false,
    AutoGetSuperhuman = false,
    AutoGetDeathStep = false,
    AutoGetSharkmanKarate = false,
    AutoGetDragonTalon = false,
    AutoGetElectricClaw = false,
    AutoGetGodhuman = false,
    AutoGetSanguineArt = false,
    
    -- Ra√ßas
    AutoGetRaceV2 = false,
    AutoGetRaceV3 = false,
    AutoGetRaceV4 = false,
    
    -- Raids
    AutoRaid = false,
    SelectedRaidChip = "Flame",
    AutoDungeon = false,
    
    -- Sea 2/3
    AutoGetToSea2 = false,
    AutoGetToSea3 = false,
    
    -- TTK
    AutoGetTTK = false,
    AutoKatakuriQuest = false
}

-- Vari√°veis de controle de Sea Events (GLOBAL)
local SeaEventRunning = false

-- =========================
-- SISTEMA DE SAVE
-- =========================
local ConfigFile = "LagTeckHub_Config.json"

local function SaveConfig()
    task.spawn(function()
        pcall(function()
            if writefile then
                writefile(ConfigFile, HttpService:JSONEncode({
                    Settings = _G.Settings,
                    LastSaved = os.time()
                }))
            end
        end)
    end)
end

local function LoadConfig()
    local loaded = false
    pcall(function()
        if isfile and readfile and isfile(ConfigFile) then
            local data = HttpService:JSONDecode(readfile(ConfigFile))
            if data and data.Settings then
                for k, v in pairs(data.Settings) do
                    _G.Settings[k] = v
                end
                loaded = true
            end
        end
    end)
    return loaded
end

local configLoaded = LoadConfig()

-- =========================
-- TEMA
-- =========================
local Config = {
    Aberto = false,
    Minimizado = false,
    Tema = {
        Fundo = Color3.fromRGB(15,25,50),
        Secundario = Color3.fromRGB(25,40,70),
        Botao = Color3.fromRGB(35,55,90),
        Ativo = Color3.fromRGB(0,120,255),
        Texto = Color3.fromRGB(255,255,255),
        AzulClaro = Color3.fromRGB(50,150,255)
    }
}

-- Vari√°veis de tamanho do painel
local PanelWidth = 420
local PanelHeight = 480
local MinWidth = 350
local MinHeight = 400
local MaxWidth = 650
local MaxHeight = 600

-- =========================
-- NOTIFICA√á√ïES
-- =========================
local function Notify(texto, duracao)
    duracao = duracao or 3
    task.spawn(function()
        local ScreenGui = Instance.new("ScreenGui")
        ScreenGui.Name = "NotificationGui_" .. tick()
        
        pcall(function()
            ScreenGui.Parent = game:GetService("CoreGui")
        end)
        
        if not ScreenGui.Parent then
            ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
        end
        
        local NotifFrame = Instance.new("Frame", ScreenGui)
        NotifFrame.Size = UDim2.new(0, 0, 0, 0)
        NotifFrame.Position = UDim2.new(0.5, 0, 0, -100)
        NotifFrame.AnchorPoint = Vector2.new(0.5, 0)
        NotifFrame.BackgroundColor3 = Config.Tema.Secundario
        NotifFrame.BorderSizePixel = 0
        
        Instance.new("UICorner", NotifFrame).CornerRadius = UDim.new(0, 10)
        
        local Label = Instance.new("TextLabel", NotifFrame)
        Label.Size = UDim2.new(1, -20, 1, 0)
        Label.Position = UDim2.fromOffset(10, 0)
        Label.Text = texto
        Label.TextColor3 = Color3.new(1, 1, 1)
        Label.BackgroundTransparency = 1
        Label.Font = Enum.Font.GothamBold
        Label.TextSize = 14
        Label.TextWrapped = true
        Label.TextXAlignment = Enum.TextXAlignment.Left
        
        TweenService:Create(NotifFrame, TweenInfo.new(0.3), {
            Size = UDim2.new(0, 300, 0, 60),
            Position = UDim2.new(0.5, 0, 0, 20)
        }):Play()
        
        task.wait(duracao)
        
        TweenService:Create(NotifFrame, TweenInfo.new(0.3), {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0, -100)
        }):Play()
        
        task.wait(0.3)
        ScreenGui:Destroy()
    end)
end

-- =========================
-- LISTAS COMPLETAS
-- =========================
local BossListSea1 = {"All","The Gorilla King","Bobby","Yeti","Mob Leader","Vice Admiral","Warden","Chief Warden","Swan","Magma Admiral","Fishman Lord","Wysper","Thunder God","Cyborg"}
local BossListSea2 = {"All","Diamond","Jeremy","Fajita","Don Swan","Smoke Admiral","Cursed Captain","Darkbeard","Order","Awakened Ice Admiral","Cake Prince"}
local BossListSea3 = {"All","Stone","Island Empress","Kilo Admiral","Captain Elephant","Beautiful Pirate","rip_indra True Form","Longma","Soul Reaper","Cake Queen","Dough King"}
local BossList = Sea == 1 and BossListSea1 or Sea == 2 and BossListSea2 or BossListSea3

local FruitList = {"Leopard-Leopard","Dragon-Dragon","Dough-Dough","Shadow-Shadow","Venom-Venom","Control-Control","Spirit-Spirit","Soul-Soul","Gravity-Gravity","Rumble-Rumble","Buddha-Buddha","Light-Light","Dark-Dark","Magma-Magma","Ice-Ice","Quake-Quake","Flame-Flame","Phoenix-Phoenix","Blizzard-Blizzard","Love-Love"}

local RaidChips = {"Flame","Ice","Quake","Light","Dark","Spider","Rumble","Magma","Buddha","Sand","Phoenix","Dough"}

local IslandPositions = {
    ["Pirate Starter"] = CFrame.new(1071, 16, 1426),
    ["Marine Starter"] = CFrame.new(-2573, 73, 2046),
    ["Jungle"] = CFrame.new(-1612, 37, 149),
    ["Pirate Village"] = CFrame.new(-1114, 5, 3738),
    ["Desert"] = CFrame.new(945, 7, 4470),
    ["Frozen Village"] = CFrame.new(1200, 105, -1318),
    ["Marine Fortress"] = CFrame.new(-2994, 73, -3125),
    ["Sky Island 1"] = CFrame.new(-4970, 718, -2667),
    ["Sky Island 2"] = CFrame.new(-4813, 718, -2792),
    ["Sky Island 3"] = CFrame.new(-7925, 5545, -380),
    ["Prison"] = CFrame.new(4875, 6, 734),
    ["Colosseum"] = CFrame.new(-1427, 7, -2926),
    ["Magma Village"] = CFrame.new(-5247, 12, 8504),
    ["Underwater City"] = CFrame.new(61164, 5, 1819),
    ["Upper Skylands"] = CFrame.new(-7894, 5547, -379),
    ["Fountain City"] = CFrame.new(-380, 38, 297),
    ["Kingdom of Rose"] = CFrame.new(-288, 7, 5579),
    ["Cafe"] = CFrame.new(-377, 73, 298),
    ["Mansion"] = CFrame.new(-12471, 374, -7551),
    ["Graveyard"] = CFrame.new(-5560, 314, -2733),
    ["Snow Mountain"] = CFrame.new(753, 408, -5274),
    ["Hot and Cold"] = CFrame.new(-6100, 16, -5167),
    ["Cursed Ship"] = CFrame.new(923, 125, 32885),
    ["Ice Castle"] = CFrame.new(5665, 88, -6155),
    ["Forgotten Island"] = CFrame.new(-3053, 240, -10145),
    ["Dark Arena"] = CFrame.new(3777, 91, -3000),
    ["Usoaps Island"] = CFrame.new(4700, 8, 2997),
    ["Port Town"] = CFrame.new(-290, 44, 5343),
    ["Hydra Island"] = CFrame.new(5749, 612, -276),
    ["Great Tree"] = CFrame.new(2681, 1682, -7190),
    ["Castle on the Sea"] = CFrame.new(-5075, 314, -3155),
    ["Haunted Castle"] = CFrame.new(-9515, 142, 5566),
    ["Sea of Treats"] = CFrame.new(-2079, 252, -12375),
    ["Tiki Outpost"] = CFrame.new(-16105, 9, 440),
    ["Floating Turtle"] = CFrame.new(-13274, 332, -7984)
}

local IslandsSea1 = {"Pirate Starter","Marine Starter","Jungle","Pirate Village","Desert","Frozen Village","Marine Fortress","Sky Island 1","Sky Island 2","Sky Island 3","Prison","Colosseum","Magma Village","Underwater City","Upper Skylands","Fountain City"}
local IslandsSea2 = {"Kingdom of Rose","Cafe","Mansion","Graveyard","Snow Mountain","Hot and Cold","Cursed Ship","Ice Castle","Forgotten Island","Dark Arena","Usoaps Island"}
local IslandsSea3 = {"Port Town","Hydra Island","Great Tree","Castle on the Sea","Haunted Castle","Sea of Treats","Tiki Outpost","Floating Turtle"}
local CurrentIslands = Sea == 1 and IslandsSea1 or Sea == 2 and IslandsSea2 or IslandsSea3

-- =========================
-- QUEST DATA COMPLETO
-- =========================
local QuestData = {}
if Sea == 1 then
    QuestData = {
        [1] = {Quest = "BanditQuest1", QuestNum = 1, Mob = "Bandit", Pos = CFrame.new(1059, 16, 1549)},
        [10] = {Quest = "JungleQuest", QuestNum = 1, Mob = "Monkey", Pos = CFrame.new(-1601, 37, 152)},
        [15] = {Quest = "BuggyQuest1", QuestNum = 1, Mob = "Pirate", Pos = CFrame.new(-1119, 5, 3831)},
        [30] = {Quest = "BuggyQuest2", QuestNum = 1, Mob = "Brute", Pos = CFrame.new(-1140, 15, 4312)},
        [40] = {Quest = "DesertQuest", QuestNum = 1, Mob = "Desert Bandit", Pos = CFrame.new(897, 6, 4388)},
        [60] = {Quest = "DesertQuest", QuestNum = 2, Mob = "Desert Officer", Pos = CFrame.new(897, 6, 4388)},
        [75] = {Quest = "SnowQuest", QuestNum = 1, Mob = "Snowman", Pos = CFrame.new(1386, 87, -1297)},
        [90] = {Quest = "SnowQuest", QuestNum = 2, Mob = "Winter Warrior", Pos = CFrame.new(1386, 87, -1297)},
        [100] = {Quest = "MarineQuest2", QuestNum = 1, Mob = "Chief Petty Officer", Pos = CFrame.new(-4881, 23, 4273)},
        [120] = {Quest = "MarineQuest3", QuestNum = 1, Mob = "Marine Captain", Pos = CFrame.new(-2442, 73, -3219)},
        [150] = {Quest = "SkyExp1Quest", QuestNum = 1, Mob = "God's Guard", Pos = CFrame.new(-4721, 845, -1954)},
        [175] = {Quest = "SkyExp1Quest", QuestNum = 2, Mob = "Shanda", Pos = CFrame.new(-7863, 5545, -380)},
        [190] = {Quest = "SkyExp2Quest", QuestNum = 1, Mob = "Royal Squad", Pos = CFrame.new(-7906, 5634, -1411)},
        [210] = {Quest = "SkyExp2Quest", QuestNum = 2, Mob = "Royal Soldier", Pos = CFrame.new(-7906, 5634, -1411)},
        [225] = {Quest = "ColosseumQuest", QuestNum = 1, Mob = "Gladiator", Pos = CFrame.new(-1315, 8, -2976)},
        [250] = {Quest = "PrisonerQuest", QuestNum = 1, Mob = "Dangerous Prisoner", Pos = CFrame.new(4875, 6, 734)},
        [275] = {Quest = "PrisonerQuest", QuestNum = 2, Mob = "Toga Warrior", Pos = CFrame.new(4875, 6, 734)},
        [300] = {Quest = "ColosseumQuest", QuestNum = 2, Mob = "Military Soldier", Pos = CFrame.new(-1315, 8, -2976)},
        [325] = {Quest = "MagmaQuest", QuestNum = 1, Mob = "Lava Pirate", Pos = CFrame.new(-5234, 12, 8445)},
        [350] = {Quest = "MagmaQuest", QuestNum = 2, Mob = "Magma Admiral", Pos = CFrame.new(-5234, 12, 8445)},
        [375] = {Quest = "FishmanQuest", QuestNum = 1, Mob = "Fishman Warrior", Pos = CFrame.new(61122, 18, 1569)},
        [400] = {Quest = "FishmanQuest", QuestNum = 2, Mob = "Fishman Commando", Pos = CFrame.new(61122, 18, 1569)},
        [450] = {Quest = "SkyExp1Quest", QuestNum = 3, Mob = "God's Guard", Pos = CFrame.new(-4721, 845, -1954)}
    }
elseif Sea == 2 then
    QuestData = {
        [700] = {Quest = "Area1Quest", QuestNum = 1, Mob = "Raider", Pos = CFrame.new(-428, 72, 1836)},
        [725] = {Quest = "Area1Quest", QuestNum = 2, Mob = "Mercenary", Pos = CFrame.new(-428, 72, 1836)},
        [775] = {Quest = "Area2Quest", QuestNum = 1, Mob = "Swan Pirate", Pos = CFrame.new(638, 73, 1194)},
        [800] = {Quest = "Area2Quest", QuestNum = 2, Mob = "Factory Staff", Pos = CFrame.new(638, 73, 1194)},
        [825] = {Quest = "MarineQuest3", QuestNum = 1, Mob = "Marine Lieutenant", Pos = CFrame.new(-2440, 73, -3217)},
        [850] = {Quest = "MarineQuest3", QuestNum = 2, Mob = "Marine Captain", Pos = CFrame.new(-2440, 73, -3217)},
        [875] = {Quest = "ZombieQuest", QuestNum = 1, Mob = "Zombie", Pos = CFrame.new(-5496, 48, -795)},
        [900] = {Quest = "ZombieQuest", QuestNum = 2, Mob = "Vampire", Pos = CFrame.new(-5496, 48, -795)},
        [950] = {Quest = "SnowMountainQuest", QuestNum = 1, Mob = "Winter Warrior", Pos = CFrame.new(604, 401, -5371)},
        [975] = {Quest = "SnowMountainQuest", QuestNum = 2, Mob = "Lab Subordinate", Pos = CFrame.new(604, 401, -5371)},
        [1000] = {Quest = "IceSideQuest", QuestNum = 1, Mob = "Horned Warrior", Pos = CFrame.new(-6078, 16, -4902)},
        [1050] = {Quest = "IceSideQuest", QuestNum = 2, Mob = "Magma Ninja", Pos = CFrame.new(-6078, 16, -4902)},
        [1100] = {Quest = "ShipQuest1", QuestNum = 1, Mob = "Pirate Millionaire", Pos = CFrame.new(971, 125, 32911)},
        [1125] = {Quest = "ShipQuest1", QuestNum = 2, Mob = "Pistol Billionaire", Pos = CFrame.new(971, 125, 32911)},
        [1150] = {Quest = "ShipQuest2", QuestNum = 1, Mob = "Dragon Crew Warrior", Pos = CFrame.new(971, 125, 32911)},
        [1175] = {Quest = "ShipQuest2", QuestNum = 2, Mob = "Dragon Crew Archer", Pos = CFrame.new(971, 125, 32911)},
        [1200] = {Quest = "FrostQuest", QuestNum = 1, Mob = "Snow Trooper", Pos = CFrame.new(5668, 28, -6484)},
        [1225] = {Quest = "FrostQuest", QuestNum = 2, Mob = "Winter Warrior", Pos = CFrame.new(5668, 28, -6484)},
        [1250] = {Quest = "ForgottenQuest", QuestNum = 1, Mob = "Sea Soldier", Pos = CFrame.new(-3053, 240, -10145)},
        [1275] = {Quest = "ForgottenQuest", QuestNum = 2, Mob = "Water Fighter", Pos = CFrame.new(-3053, 240, -10145)},
        [1300] = {Quest = "Area1Quest", QuestNum = 3, Mob = "Raider", Pos = CFrame.new(-428, 72, 1836)},
        [1325] = {Quest = "Area2Quest", QuestNum = 3, Mob = "Swan Pirate", Pos = CFrame.new(638, 73, 1194)}
    }
else
    QuestData = {
        [1500] = {Quest = "PiratePortQuest", QuestNum = 1, Mob = "Pirate Millionaire", Pos = CFrame.new(-290, 44, 5580)},
        [1525] = {Quest = "PiratePortQuest", QuestNum = 2, Mob = "Pistol Billionaire", Pos = CFrame.new(-290, 44, 5580)},
        [1575] = {Quest = "AmazonQuest", QuestNum = 1, Mob = "Amazon Warrior", Pos = CFrame.new(5832, 52, -1105)},
        [1600] = {Quest = "AmazonQuest", QuestNum = 2, Mob = "Amazon Hunter", Pos = CFrame.new(5832, 52, -1105)},
        [1625] = {Quest = "MarineTreeIsland", QuestNum = 1, Mob = "Marine Commodore", Pos = CFrame.new(2179, 29, -6737)},
        [1675] = {Quest = "MarineTreeIsland", QuestNum = 2, Mob = "Marine Rear Admiral", Pos = CFrame.new(2179, 29, -6737)},
        [1700] = {Quest = "DeepForestIsland", QuestNum = 1, Mob = "Mythological Pirate", Pos = CFrame.new(-13233, 332, -7625)},
        [1725] = {Quest = "DeepForestIsland", QuestNum = 2, Mob = "Jungle Pirate", Pos = CFrame.new(-13233, 332, -7625)},
        [1775] = {Quest = "DeepForestIsland2", QuestNum = 1, Mob = "Jungle Pirate", Pos = CFrame.new(-12680, 391, -9902)},
        [1800] = {Quest = "DeepForestIsland3", QuestNum = 1, Mob = "Musketeer Pirate", Pos = CFrame.new(-13235, 332, -7624)},
        [1825] = {Quest = "DeepForestIsland3", QuestNum = 2, Mob = "Reborn Skeleton", Pos = CFrame.new(-13235, 332, -7624)},
        [1850] = {Quest = "DeepForestIsland3", QuestNum = 3, Mob = "Living Zombie", Pos = CFrame.new(-13235, 332, -7624)},
        [1875] = {Quest = "DeepForestIsland4", QuestNum = 1, Mob = "Demonic Soul", Pos = CFrame.new(-9507, 172, 6158)},
        [1900] = {Quest = "DeepForestIsland4", QuestNum = 2, Mob = "Posessed Mummy", Pos = CFrame.new(-9507, 172, 6158)},
        [1925] = {Quest = "DeepForestIsland5", QuestNum = 1, Mob = "Peanut Scout", Pos = CFrame.new(-2103, 38, -10192)},
        [1975] = {Quest = "DeepForestIsland5", QuestNum = 2, Mob = "Peanut President", Pos = CFrame.new(-2103, 38, -10192)},
        [2000] = {Quest = "DeepForestIsland6", QuestNum = 1, Mob = "Ice Cream Chef", Pos = CFrame.new(-2103, 38, -10192)},
        [2025] = {Quest = "DeepForestIsland6", QuestNum = 2, Mob = "Ice Cream Commander", Pos = CFrame.new(-2103, 38, -10192)},
        [2050] = {Quest = "DeepForestIsland7", QuestNum = 1, Mob = "Cookie Crafter", Pos = CFrame.new(-2103, 38, -10192)},
        [2075] = {Quest = "DeepForestIsland7", QuestNum = 2, Mob = "Cake Guard", Pos = CFrame.new(-2103, 38, -10192)},
        [2100] = {Quest = "DeepForestIsland8", QuestNum = 1, Mob = "Baking Staff", Pos = CFrame.new(-2103, 38, -10192)},
        [2125] = {Quest = "DeepForestIsland8", QuestNum = 2, Mob = "Head Baker", Pos = CFrame.new(-2103, 38, -10192)},
        [2150] = {Quest = "DeepForestIsland9", QuestNum = 1, Mob = "Cocoa Warrior", Pos = CFrame.new(-2103, 38, -10192)},
        [2175] = {Quest = "DeepForestIsland9", QuestNum = 2, Mob = "Chocolate Bar Battler", Pos = CFrame.new(-2103, 38, -10192)},
        [2200] = {Quest = "DeepForestIsland10", QuestNum = 1, Mob = "Sweet Thief", Pos = CFrame.new(-2103, 38, -10192)},
        [2225] = {Quest = "DeepForestIsland10", QuestNum = 2, Mob = "Candy Rebel", Pos = CFrame.new(-2103, 38, -10192)},
        [2250] = {Quest = "DeepForestIsland11", QuestNum = 1, Mob = "Candy Pirate", Pos = CFrame.new(-2103, 38, -10192)},
        [2275] = {Quest = "DeepForestIsland11", QuestNum = 2, Mob = "Sweet Thief", Pos = CFrame.new(-2103, 38, -10192)},
        [2300] = {Quest = "DeepForestIsland12", QuestNum = 1, Mob = "Cocoa Warrior", Pos = CFrame.new(-2103, 38, -10192)},
        [2325] = {Quest = "DeepForestIsland12", QuestNum = 2, Mob = "Chocolate Bar Battler", Pos = CFrame.new(-2103, 38, -10192)}
    }
end

local function GetQuestByLevel(level)
    local selectedQuest = nil
    local maxLevel = 0
    for lvl, quest in pairs(QuestData) do
        if level >= lvl and lvl > maxLevel then
            selectedQuest = quest
            maxLevel = lvl
        end
    end
    return selectedQuest
end

-- =========================
-- FUN√á√ïES CORE
-- =========================
local function Tween(obj, time, props)
    local tween = TweenService:Create(obj, TweenInfo.new(time, Enum.EasingStyle.Linear), props)
    tween:Play()
    return tween
end

local function TP(cframe)
    pcall(function()
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = LocalPlayer.Character.HumanoidRootPart
            local distance = (hrp.Position - cframe.Position).Magnitude
            if distance < 250 then
                hrp.CFrame = cframe
            else
                local tween = Tween(hrp, distance/300, {CFrame = cframe})
                tween.Completed:Wait()
            end
        end
    end)
end

local function GetRemote()
    local success, remote = pcall(function()
        return ReplicatedStorage:WaitForChild("Remotes", 5):WaitForChild("CommF_", 5)
    end)
    return success and remote or nil
end

local function EquipWeapon()
    if _G.Settings.WeaponType == "Nenhum" then return false end
    local weaponMap = {
        ["Estilo de Luta"] = "Melee",
        ["Espada"] = "Sword",
        ["Arma"] = "Gun",
        ["Fruta"] = "Blox Fruit"
    }
    local targetType = weaponMap[_G.Settings.WeaponType]
    if not targetType then return false end
    
    for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool.ToolTip == targetType then
            LocalPlayer.Character.Humanoid:EquipTool(tool)
            return true
        end
    end
    return false
end

local function Click()
    pcall(function()
        VirtualUser:CaptureController()
        VirtualUser:Button1Down(Vector2.new(1280, 672))
    end)
end

local function ActivateBuso()
    pcall(function()
        if not LocalPlayer.Character:FindFirstChild("HasBuso") then
            local remote = GetRemote()
            if remote then
                remote:InvokeServer("Buso")
            end
        end
    end)
end

local function TeleportToSea(seaNumber)
    local placeIds = {[1] = 2753915549, [2] = 4442272183, [3] = 7449423635}
    if not placeIds[seaNumber] then return end
    if Sea == seaNumber then
        Notify("‚úÖ Voc√™ j√° est√° no SEA " .. seaNumber)
        return
    end
    Notify("üöÄ Teleportando para SEA " .. seaNumber .. "...")
    pcall(function()
        game:GetService("TeleportService"):Teleport(placeIds[seaNumber], LocalPlayer)
    end)
end

local function FormatNumber(num)
    if num >= 1000000000 then
        return string.format("%.1fB", num / 1000000000)
    elseif num >= 1000000 then
        return string.format("%.1fM", num / 1000000)
    elseif num >= 1000 then
        return string.format("%.1fK", num / 1000)
    else
        return tostring(math.floor(num))
    end
end

-- =========================
-- WALK ON WATER
-- =========================
local WaterParts = {}
task.spawn(function()
    while task.wait(0.1) do
        pcall(function()
            if _G.Settings.WalkOnWater then
                for _, v in pairs(workspace:GetDescendants()) do
                    if v:IsA("BasePart") and v.Name == "Water" then
                        if not WaterParts[v] then
                            WaterParts[v] = {OriginalCanCollide = v.CanCollide}
                        end
                        v.CanCollide = true
                    end
                end
            else
                for v, data in pairs(WaterParts) do
                    if v and v.Parent then
                        v.CanCollide = data.OriginalCanCollide
                    end
                end
                WaterParts = {}
            end
        end)
    end
end)

-- =========================
-- REMOVE FOG
-- =========================
local OriginalFog = {FogEnd = Lighting.FogEnd, FogStart = Lighting.FogStart}
task.spawn(function()
    while task.wait(0.5) do
        pcall(function()
            if _G.Settings.RemoveFog then
                Lighting.FogEnd = 100000
                Lighting.FogStart = 0
                Lighting.Brightness = 2
                Lighting.ClockTime = 12
                Lighting.GlobalShadows = false
            else
                Lighting.FogEnd = OriginalFog.FogEnd
                Lighting.FogStart = OriginalFog.FogStart
            end
        end)
    end
end)

-- =========================
-- ESP SYSTEMS COMPLETO E FUNCIONAL
-- =========================
local ESPObjects = {
    Fruits = {},
    Players = {},
    Chests = {},
    Islands = {},
    NPCs = {},
    Mirage = {},
    Flowers = {},
    Bosses = {}
}

-- Fun√ß√£o para criar ESP com melhor visibilidade
local function CreateESP(obj, text, color, offset)
    local billboard = nil
    
    pcall(function()
        if obj:FindFirstChild("ESPTag") then 
            obj.ESPTag:Destroy()
        end
        
        billboard = Instance.new("BillboardGui")
        billboard.Name = "ESPTag"
        billboard.Parent = obj
        billboard.Size = UDim2.new(0, 200, 0, 50)
        billboard.AlwaysOnTop = true
        billboard.StudsOffset = offset or Vector3.new(0, 3, 0)
        billboard.Adornee = obj
        billboard.MaxDistance = 5000
        
        local label = Instance.new("TextLabel", billboard)
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.TextColor3 = color
        label.Font = Enum.Font.GothamBold
        label.TextSize = 16
        label.TextStrokeTransparency = 0.5
        label.TextStrokeColor3 = Color3.new(0, 0, 0)
        label.Text = text
    end)
    
    return billboard
end

-- ESP FRUTAS (MELHORADO)
task.spawn(function()
    while task.wait(2) do
        if _G.Settings.ESPFruit then
            pcall(function()
                -- Frutas no workspace
                for _, obj in pairs(workspace:GetChildren()) do
                    if obj:IsA("Tool") or (obj:IsA("Model") and obj:FindFirstChild("Handle")) then
                        local handle = obj:IsA("Tool") and obj:FindFirstChild("Handle") or obj.Handle
                        if handle and not ESPObjects.Fruits[obj] then
                            local fruitName = obj.Name
                            -- Verificar se √© realmente uma fruta
                            if fruitName:find("Fruit") or obj:FindFirstChild("Fruit") then
                                local esp = CreateESP(handle, "üçé " .. fruitName, Color3.new(1, 1, 0), Vector3.new(0, 5, 0))
                                if esp then
                                    ESPObjects.Fruits[obj] = esp
                                    
                                    task.spawn(function()
                                        while obj and obj.Parent and _G.Settings.ESPFruit and handle do
                                            pcall(function()
                                                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                                    local distance = (LocalPlayer.Character.HumanoidRootPart.Position - handle.Position).Magnitude
                                                    esp.TextLabel.Text = "üçé " .. fruitName .. "\n" .. math.floor(distance) .. "m"
                                                end
                                            end)
                                            task.wait(0.5)
                                        end
                                        if esp then esp:Destroy() end
                                        ESPObjects.Fruits[obj] = nil
                                    end)
                                end
                            end
                        end
                    end
                end
            end)
        else
            -- Limpar todos os ESPs de frutas
            for obj, esp in pairs(ESPObjects.Fruits) do
                pcall(function()
                    if esp then esp:Destroy() end
                end)
            end
            ESPObjects.Fruits = {}
        end
    end
end)

-- ESP PLAYERS (MELHORADO)
task.spawn(function()
    while task.wait(1) do
        if _G.Settings.ESPPlayer then
            pcall(function()
                for _, player in pairs(Players:GetPlayers()) do
                    if player ~= LocalPlayer and player.Character then
                        local hrp = player.Character:FindFirstChild("HumanoidRootPart")
                        local hum = player.Character:FindFirstChild("Humanoid")
                        
                        if hrp and hum and hum.Health > 0 then
                            if not ESPObjects.Players[player] then
                                local esp = CreateESP(hrp, "üë§ " .. player.Name, Color3.new(1, 0, 0), Vector3.new(0, 3, 0))
                                if esp then
                                    ESPObjects.Players[player] = esp
                                    
                                    task.spawn(function()
                                        while player and player.Character and _G.Settings.ESPPlayer do
                                            pcall(function()
                                                local char = player.Character
                                                local rootPart = char and char:FindFirstChild("HumanoidRootPart")
                                                local humanoid = char and char:FindFirstChild("Humanoid")
                                                
                                                if rootPart and humanoid and humanoid.Health > 0 then
                                                    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                                        local distance = (LocalPlayer.Character.HumanoidRootPart.Position - rootPart.Position).Magnitude
                                                        local health = math.floor((humanoid.Health / humanoid.MaxHealth) * 100)
                                                        esp.TextLabel.Text = "üë§ " .. player.Name .. "\n" .. math.floor(distance) .. "m | HP: " .. health .. "%"
                                                        
                                                        -- Mudar cor baseado na dist√¢ncia
                                                        if distance < 50 then
                                                            esp.TextLabel.TextColor3 = Color3.new(1, 0, 0) -- Vermelho (perto)
                                                        elseif distance < 150 then
                                                            esp.TextLabel.TextColor3 = Color3.new(1, 0.5, 0) -- Laranja (m√©dio)
                                                        else
                                                            esp.TextLabel.TextColor3 = Color3.new(1, 1, 0) -- Amarelo (longe)
                                                        end
                                                    end
                                                else
                                                    break
                                                end
                                            end)
                                            task.wait(0.3)
                                        end
                                        if esp then esp:Destroy() end
                                        ESPObjects.Players[player] = nil
                                    end)
                                end
                            end
                        end
                    end
                end
            end)
        else
            -- Limpar todos os ESPs de players
            for player, esp in pairs(ESPObjects.Players) do
                pcall(function()
                    if esp then esp:Destroy() end
                end)
            end
            ESPObjects.Players = {}
        end
    end
end)

-- ESP CHESTS (MELHORADO)
task.spawn(function()
    while task.wait(3) do
        if _G.Settings.ESPChest then
            pcall(function()
                -- Procurar chests no workspace
                for _, obj in pairs(workspace:GetChildren()) do
                    if (obj.Name:find("Chest") or obj.Name == "Chest1" or obj.Name == "Chest2" or obj.Name == "Chest3") and not ESPObjects.Chests[obj] then
                        local part = obj:IsA("Model") and (obj:FindFirstChild("Root") or obj:FindFirstChild("Part") or obj:FindFirstChildWhichIsA("Part")) or obj
                        
                        if part and part:IsA("BasePart") then
                            local chestType = "üíé Chest"
                            if obj.Name:find("Gold") or obj.Name == "Chest2" then
                                chestType = "üü° Golden Chest"
                            elseif obj.Name:find("Diamond") or obj.Name == "Chest3" then
                                chestType = "üí† Diamond Chest"
                            end
                            
                            local esp = CreateESP(part, chestType, Color3.new(0, 1, 0), Vector3.new(0, 3, 0))
                            if esp then
                                ESPObjects.Chests[obj] = esp
                                
                                task.spawn(function()
                                    while obj and obj.Parent and _G.Settings.ESPChest do
                                        pcall(function()
                                            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                                local distance = (LocalPlayer.Character.HumanoidRootPart.Position - part.Position).Magnitude
                                                esp.TextLabel.Text = chestType .. "\n" .. math.floor(distance) .. "m"
                                            end
                                        end)
                                        task.wait(0.5)
                                    end
                                    if esp then esp:Destroy() end
                                    ESPObjects.Chests[obj] = nil
                                end)
                            end
                        end
                    end
                end
            end)
        else
            -- Limpar todos os ESPs de chests
            for chest, esp in pairs(ESPObjects.Chests) do
                pcall(function()
                    if esp then esp:Destroy() end
                end)
            end
            ESPObjects.Chests = {}
        end
    end
end)

-- ESP FLOWERS (MELHORADO)
task.spawn(function()
    while task.wait(4) do
        if _G.Settings.ESPFlower then
            pcall(function()
                -- Procurar flores (Blue Flower, Red Flower para Godhuman)
                for _, obj in pairs(workspace:GetChildren()) do
                    if (obj.Name:find("Flower") or obj.Name == "Blue Flower" or obj.Name == "Red Flower") and not ESPObjects.Flowers[obj] then
                        local part = obj:IsA("Model") and (obj:FindFirstChild("Handle") or obj:FindFirstChildWhichIsA("Part")) or obj
                        
                        if part and part:IsA("BasePart") then
                            local flowerColor = Color3.new(1, 0, 1) -- Magenta padr√£o
                            local flowerName = "üå∏ Flower"
                            
                            if obj.Name:find("Blue") then
                                flowerColor = Color3.new(0, 0.5, 1)
                                flowerName = "üîµ Blue Flower"
                            elseif obj.Name:find("Red") then
                                flowerColor = Color3.new(1, 0, 0)
                                flowerName = "üî¥ Red Flower"
                            end
                            
                            local esp = CreateESP(part, flowerName, flowerColor, Vector3.new(0, 2, 0))
                            if esp then
                                ESPObjects.Flowers[obj] = esp
                                
                                task.spawn(function()
                                    while obj and obj.Parent and _G.Settings.ESPFlower do
                                        pcall(function()
                                            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                                local distance = (LocalPlayer.Character.HumanoidRootPart.Position - part.Position).Magnitude
                                                esp.TextLabel.Text = flowerName .. "\n" .. math.floor(distance) .. "m"
                                            end
                                        end)
                                        task.wait(0.5)
                                    end
                                    if esp then esp:Destroy() end
                                    ESPObjects.Flowers[obj] = nil
                                end)
                            end
                        end
                    end
                end
            end)
        else
            -- Limpar todos os ESPs de flowers
            for flower, esp in pairs(ESPObjects.Flowers) do
                pcall(function()
                    if esp then esp:Destroy() end
                end)
            end
            ESPObjects.Flowers = {}
        end
    end
end)

-- ESP MIRAGE ISLAND (MELHORADO)
task.spawn(function()
    while task.wait(10) do
        if _G.Settings.ESPMirage and Sea == 3 then
            pcall(function()
                -- Procurar Mirage Island
                for _, obj in pairs(workspace:GetChildren()) do
                    if obj.Name == "MysticIsland" and not ESPObjects.Mirage[obj] then
                        -- Procurar a parte central da ilha
                        local center = obj:FindFirstChild("Center") or obj:FindFirstChild("RootPart") or obj:FindFirstChildWhichIsA("Part", true)
                        
                        if center then
                            local esp = CreateESP(center, "üèùÔ∏è MIRAGE ISLAND!", Color3.new(0, 1, 1), Vector3.new(0, 50, 0))
                            if esp then
                                ESPObjects.Mirage[obj] = esp
                                Notify("üèùÔ∏è Mirage Island detectada!")
                                
                                task.spawn(function()
                                    while obj and obj.Parent and _G.Settings.ESPMirage do
                                        pcall(function()
                                            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                                local distance = (LocalPlayer.Character.HumanoidRootPart.Position - center.Position).Magnitude
                                                esp.TextLabel.Text = "üèùÔ∏è MIRAGE ISLAND\n" .. math.floor(distance) .. "m"
                                            end
                                        end)
                                        task.wait(1)
                                    end
                                    if esp then esp:Destroy() end
                                    ESPObjects.Mirage[obj] = nil
                                end)
                            end
                        end
                    end
                end
            end)
        else
            -- Limpar todos os ESPs de mirage
            for island, esp in pairs(ESPObjects.Mirage) do
                pcall(function()
                    if esp then esp:Destroy() end
                end)
            end
            ESPObjects.Mirage = {}
        end
    end
end)

-- ESP NPCS/BOSSES (NOVO)
task.spawn(function()
    while task.wait(2) do
        if _G.Settings.ESPNPC then
            pcall(function()
                -- Procurar NPCs e Bosses em workspace.Enemies
                for _, mob in pairs(workspace.Enemies:GetChildren()) do
                    if mob:FindFirstChild("Humanoid") and mob:FindFirstChild("HumanoidRootPart") then
                        if not ESPObjects.NPCs[mob] then
                            local isBoss = false
                            local mobName = mob.Name
                            
                            -- Verificar se √© um boss
                            for _, bossName in pairs(BossList) do
                                if mobName == bossName then
                                    isBoss = true
                                    break
                                end
                            end
                            
                            local color = isBoss and Color3.new(1, 0, 0) or Color3.new(1, 1, 1)
                            local icon = isBoss and "üëë" or "‚öîÔ∏è"
                            
                            local esp = CreateESP(mob.HumanoidRootPart, icon .. " " .. mobName, color, Vector3.new(0, 3, 0))
                            if esp then
                                ESPObjects.NPCs[mob] = esp
                                
                                task.spawn(function()
                                    while mob and mob.Parent and _G.Settings.ESPNPC and mob:FindFirstChild("Humanoid") do
                                        pcall(function()
                                            local humanoid = mob.Humanoid
                                            if humanoid.Health > 0 then
                                                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                                    local distance = (LocalPlayer.Character.HumanoidRootPart.Position - mob.HumanoidRootPart.Position).Magnitude
                                                    local health = math.floor((humanoid.Health / humanoid.MaxHealth) * 100)
                                                    esp.TextLabel.Text = icon .. " " .. mobName .. "\n" .. math.floor(distance) .. "m | HP: " .. health .. "%"
                                                end
                                            else
                                                break
                                            end
                                        end)
                                        task.wait(0.3)
                                    end
                                    if esp then esp:Destroy() end
                                    ESPObjects.NPCs[mob] = nil
                                end)
                            end
                        end
                    end
                end
            end)
        else
            -- Limpar todos os ESPs de NPCs
            for npc, esp in pairs(ESPObjects.NPCs) do
                pcall(function()
                    if esp then esp:Destroy() end
                end)
            end
            ESPObjects.NPCs = {}
        end
    end
end)

print("‚úÖ ESP System carregado e funcional!")

-- =========================
-- FAST ATTACK
-- =========================
task.spawn(function()
    while task.wait(0.1) do
        if _G.Settings.FastAttack then
            pcall(function()
                Click()
                if _G.Settings.AutoHaki then
                    ActivateBuso()
                end
            end)
        end
    end
end)

-- =========================
-- AUTO FARM LEVEL
-- =========================
task.spawn(function()
    while task.wait(0.5) do
        if _G.Settings.AutoFarmLevel then
            if _G.Settings.WeaponType == "Nenhum" then
                _G.Settings.AutoFarmLevel = false
                Notify("‚ö†Ô∏è SELECIONE UMA ARMA!")
                continue
            end
            
            pcall(function()
                local myLevel = LocalPlayer.Data.Level.Value
                local questInfo = GetQuestByLevel(myLevel)
                
                if not questInfo then return end
                
                local questGui = LocalPlayer.PlayerGui:FindFirstChild("Main")
                if not questGui then return end
                questGui = questGui:FindFirstChild("Quest")
                if not questGui then return end
                
                if not questGui.Visible or not questGui.Container.QuestTitle.Title.Text:find(questInfo.Quest) then
                    repeat
                        TP(questInfo.Pos)
                        task.wait(0.5)
                    until (LocalPlayer.Character.HumanoidRootPart.Position - questInfo.Pos.Position).Magnitude < 15 or not _G.Settings.AutoFarmLevel
                    
                    if _G.Settings.AutoFarmLevel then
                        local remote = GetRemote()
                        if remote then
                            remote:InvokeServer("StartQuest", questInfo.Quest, questInfo.QuestNum)
                            task.wait(1)
                        end
                    end
                end
                
                if _G.Settings.AutoFarmLevel and questGui.Visible then
                    for _, mob in pairs(workspace.Enemies:GetChildren()) do
                        if mob.Name == questInfo.Mob and mob:FindFirstChild("Humanoid") and mob:FindFirstChild("HumanoidRootPart") and mob.Humanoid.Health > 0 then
                            if not EquipWeapon() then
                                _G.Settings.AutoFarmLevel = false
                                Notify("‚ö†Ô∏è Arma n√£o equipada!")
                                break
                            end
                            
                            repeat
                                task.wait()
                                if not _G.Settings.AutoFarmLevel or not mob or not mob.Parent or mob.Humanoid.Health <= 0 or not questGui.Visible then break end
                                
                                if _G.Settings.BringMobs then
                                    pcall(function()
                                        mob.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                        mob.HumanoidRootPart.Transparency = 1
                                        mob.Humanoid.WalkSpeed = 0
                                        mob.Humanoid.JumpPower = 0
                                        mob.HumanoidRootPart.CanCollide = false
                                    end)
                                end
                                
                                pcall(function()
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, _G.Settings.FarmDistance, 0)
                                end)
                                
                                _G.Settings.FastAttack = true
                            until not mob.Parent or mob.Humanoid.Health <= 0 or not _G.Settings.AutoFarmLevel or not questGui.Visible
                            
                            _G.Settings.FastAttack = false
                        end
                    end
                end
            end)
        else
            _G.Settings.FastAttack = false
        end
    end
end)

-- =========================
-- AUTO FARM BOSS
-- =========================
task.spawn(function()
    while task.wait(0.5) do
        if _G.Settings.AutoFarmBoss then
            pcall(function()
                for _, boss in pairs(workspace.Enemies:GetChildren()) do
                    if boss:FindFirstChild("Humanoid") and boss:FindFirstChild("HumanoidRootPart") and boss.Humanoid.Health > 0 then
                        if _G.Settings.SelectedBoss == "All" or boss.Name == _G.Settings.SelectedBoss then
                            repeat
                                task.wait()
                                if not _G.Settings.AutoFarmBoss then break end
                                EquipWeapon()
                                boss.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                boss.HumanoidRootPart.Transparency = 1
                                boss.Humanoid.WalkSpeed = 0
                                LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                _G.Settings.FastAttack = true
                            until not boss.Parent or boss.Humanoid.Health <= 0 or not _G.Settings.AutoFarmBoss
                            _G.Settings.FastAttack = false
                        end
                    end
                end
            end)
        else
            _G.Settings.FastAttack = false
        end
    end
end)

-- =========================
-- AUTO CHEST
-- =========================
task.spawn(function()
    while task.wait(0.5) do
        if _G.Settings.AutoChest then
            pcall(function()
                for _, chest in pairs(workspace:GetChildren()) do
                    if chest.Name:find("Chest") and (chest:FindFirstChild("Part") or chest:FindFirstChild("MeshPart")) then
                        local chestPart = chest:FindFirstChild("Part") or chest:FindFirstChild("MeshPart")
                        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                            if (LocalPlayer.Character.HumanoidRootPart.Position - chestPart.Position).Magnitude < 5000 then
                                TP(chestPart.CFrame * CFrame.new(0, 3, 0))
                                task.wait(0.2)
                                if (LocalPlayer.Character.HumanoidRootPart.Position - chestPart.Position).Magnitude < 5 then
                                    local remote = GetRemote()
                                    if remote then
                                        remote:InvokeServer("OpenChest", chest.Name)
                                    end
                                    task.wait(1)
                                end
                            end
                        end
                    end
                end
            end)
        end
    end
end)

-- =========================
-- FRUIT SYSTEMS
-- =========================
task.spawn(function()
    while task.wait(1) do
        if _G.Settings.AutoFruitSniper then
            pcall(function()
                for _, fruit in pairs(workspace:GetChildren()) do
                    if fruit:IsA("Tool") and fruit:FindFirstChild("Handle") then
                        TP(fruit.Handle.CFrame)
                        task.wait(0.5)
                    end
                end
            end)
        end
    end
end)

task.spawn(function()
    while task.wait(2) do
        if _G.Settings.AutoStoreFruit then
            pcall(function()
                for _, fruit in pairs(LocalPlayer.Backpack:GetChildren()) do
                    if fruit:IsA("Tool") and fruit:FindFirstChild("Handle") then
                        local remote = GetRemote()
                        if remote then
                            remote:InvokeServer("StoreFruit", fruit:GetAttribute("OriginalName"), LocalPlayer.Backpack[fruit.Name])
                            task.wait(0.5)
                        end
                    end
                end
            end)
        end
    end
end)

task.spawn(function()
    while task.wait(10) do
        if _G.Settings.AutoBuyFruit then
            pcall(function()
                local remote = GetRemote()
                if remote then
                    remote:InvokeServer("PurchaseRawFruit", _G.Settings.SelectedFruit, false)
                end
            end)
        end
    end
end)

task.spawn(function()
    while task.wait(2) do
        if _G.Settings.AutoRandomFruit then
            pcall(function()
                local remote = GetRemote()
                if remote then
                    remote:InvokeServer("Cousin", "Buy")
                end
            end)
        end
    end
end)

-- =========================
-- AUTO PVP
-- =========================
task.spawn(function()
    while task.wait(0.5) do
        if _G.Settings.AutoPVP and _G.Settings.SelectedPlayer then
            pcall(function()
                local targetPlayer = Players:FindFirstChild(_G.Settings.SelectedPlayer)
                if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") and targetPlayer.Character:FindFirstChild("Humanoid") and targetPlayer.Character.Humanoid.Health > 0 then
                    EquipWeapon()
                    repeat
                        task.wait()
                        if not _G.Settings.AutoPVP or not targetPlayer.Character or targetPlayer.Character.Humanoid.Health <= 0 then break end
                        if _G.Settings.SafeMode and LocalPlayer.Character.Humanoid.Health < LocalPlayer.Character.Humanoid.MaxHealth * 0.3 then
                            Notify("‚ö†Ô∏è Safe Mode ativado - vida baixa!")
                            break
                        end
                        LocalPlayer.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 5, 5)
                        _G.Settings.FastAttack = true
                    until not targetPlayer.Character or targetPlayer.Character.Humanoid.Health <= 0 or not _G.Settings.AutoPVP
                    _G.Settings.FastAttack = false
                end
            end)
        else
            _G.Settings.FastAttack = false
        end
    end
end)

-- =========================
-- ANTI AFK
-- =========================
task.spawn(function()
    while task.wait(60) do
        if _G.Settings.AntiAFK then
            pcall(function()
                VirtualUser:CaptureController()
                VirtualUser:ClickButton2(Vector2.new())
            end)
        end
    end
end)

-- =========================
-- SEA EVENT SYSTEMS
-- =========================
local SeaDepthPositions = {["Mar 1"] = -50, ["Mar 2"] = -100, ["Mar 3"] = -200, ["Mar 4"] = -400, ["Mar 5"] = -600, ["Mar 6"] = -800}
local circleRadius = 300
local circleAngle = 0

task.spawn(function()
    while task.wait(1) do
        if _G.Settings.SeaEventActive and _G.Settings.SeaEventBoat ~= "Nenhum" then
            pcall(function()
                local boat = workspace.Boats:FindFirstChild(_G.Settings.SeaEventBoat)
                if boat and boat:FindFirstChild("VehicleSeat") then
                    local depth = SeaDepthPositions[_G.Settings.SeaDepth] or -50
                    circleAngle = circleAngle + 0.05
                    if circleAngle >= math.pi * 2 then circleAngle = 0 end
                    local xOffset = math.cos(circleAngle) * circleRadius
                    local zOffset = math.sin(circleAngle) * circleRadius
                    local currentPos = boat.VehicleSeat.CFrame.Position
                    local newCFrame = CFrame.new(currentPos.X + xOffset, depth, currentPos.Z + zOffset)
                    boat.VehicleSeat.CFrame = newCFrame
                end
            end)
        end
    end
end)

-- AUTO KATAKURI (SEA 2)
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoKatakuri and Sea == 2 then
            pcall(function()
                local remote = GetRemote()
                if remote then
                    local progress = remote:InvokeServer("CakePrinceSpawner")
                    if progress and type(progress) == "number" and progress >= 500 then
                        -- Teleportar para Katakuri
                        TP(CFrame.new(-2077, 252, -12373))
                        
                        -- Procurar e farmar Katakuri
                        for _, boss in pairs(workspace.Enemies:GetChildren()) do
                            if boss.Name == "Cake Prince" and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                                repeat
                                    task.wait()
                                    EquipWeapon()
                                    boss.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                    _G.Settings.FastAttack = true
                                until not boss.Parent or boss.Humanoid.Health <= 0 or not _G.Settings.AutoKatakuri
                                _G.Settings.FastAttack = false
                                Notify("‚úÖ Katakuri derrotado!")
                            end
                        end
                    end
                end
            end)
        end
    end
end)

-- AUTO MIRAGE ISLAND
task.spawn(function()
    while task.wait(10) do
        if _G.Settings.AutoMirage and Sea == 3 then
            pcall(function()
                for _, v in pairs(workspace:GetChildren()) do
                    if v.Name == "MysticIsland" then
                        TP(v:FindFirstChild("Center") and v.Center.CFrame or CFrame.new(v:GetModelCFrame().Position))
                        Notify("‚úÖ Miragem encontrada!")
                        break
                    end
                end
            end)
        end
    end
end)

-- AUTO VOLCANO
task.spawn(function()
    while task.wait(10) do
        if _G.Settings.AutoVolcano and Sea == 3 then
            pcall(function()
                -- Procurar ilha do vulc√£o
                for _, v in pairs(workspace:GetChildren()) do
                    if v.Name:find("Volcano") then
                        TP(CFrame.new(v:GetModelCFrame().Position))
                        Notify("‚úÖ Vulc√£o encontrado!")
                        
                        -- Craftar Volcanic Magnet
                        local remote = GetRemote()
                        if remote then
                            remote:InvokeServer("CraftVolcanicMagnet")
                        end
                        break
                    end
                end
            end)
        end
    end
end)

-- AUTO LEVIATHAN
task.spawn(function()
    while task.wait(10) do
        if _G.Settings.AutoLeviathan and Sea == 3 then
            pcall(function()
                if workspace:FindFirstChild("Leviathan") then
                    local leviathan = workspace.Leviathan
                    TP(leviathan:FindFirstChild("HumanoidRootPart") and leviathan.HumanoidRootPart.CFrame or CFrame.new(leviathan:GetModelCFrame().Position))
                    Notify("‚úÖ Leviathan encontrado!")
                end
            end)
        end
    end
end)

-- AUTO SEA BEAST
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoSeaBeast then
            pcall(function()
                for _, v in pairs(workspace.SeaBeasts:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipWeapon()
                            v.HumanoidRootPart.Size = Vector3.new(60,60,60)
                            LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 50, 0)
                            _G.Settings.FastAttack = true
                        until not v.Parent or v.Humanoid.Health <= 0 or not _G.Settings.AutoSeaBeast
                        _G.Settings.FastAttack = false
                        Notify("‚úÖ Sea Beast derrotado!")
                    end
                end
            end)
        end
    end
end)

-- =========================
-- AUTO GET CDK (CURSED DUAL KATANA)
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetCDK and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem CDK
                local hasCDK = false
                for _, v in pairs(LocalPlayer.Backpack:GetChildren()) do
                    if v.Name == "Cursed Dual Katana" then
                        hasCDK = true
                        break
                    end
                end
                
                if hasCDK then
                    Notify("‚úÖ Voc√™ j√° tem a CDK!")
                    _G.Settings.AutoGetCDK = false
                    return
                end
                
                -- Passo 1: Pegar Tushita
                if not LocalPlayer.Backpack:FindFirstChild("Tushita") and not LocalPlayer.Character:FindFirstChild("Tushita") then
                    Notify("üìå Farmando para Tushita...")
                    -- Farmar Longma (boss que dropka Tushita)
                    for _, boss in pairs(workspace.Enemies:GetChildren()) do
                        if boss.Name == "Longma" and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                            repeat
                                task.wait()
                                EquipWeapon()
                                boss.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                _G.Settings.FastAttack = true
                            until not boss.Parent or boss.Humanoid.Health <= 0 or not _G.Settings.AutoGetCDK
                            _G.Settings.FastAttack = false
                        end
                    end
                end
                
                -- Passo 2: Pegar Yama
                if not LocalPlayer.Backpack:FindFirstChild("Yama") and not LocalPlayer.Character:FindFirstChild("Yama") then
                    Notify("üìå Farmando para Yama...")
                    -- Comprar Yama do NPC
                    TP(CFrame.new(-2777, 14, -3037))
                    task.wait(1)
                    remote:InvokeServer("BuyItem", "Yama")
                end
                
                -- Passo 3: Combinar para fazer CDK
                if (LocalPlayer.Backpack:FindFirstChild("Tushita") or LocalPlayer.Character:FindFirstChild("Tushita")) and
                   (LocalPlayer.Backpack:FindFirstChild("Yama") or LocalPlayer.Character:FindFirstChild("Yama")) then
                    Notify("üìå Combinando Tushita + Yama = CDK...")
                    TP(CFrame.new(-12361, 603, -6550)) -- Mysterious Man location
                    task.wait(2)
                    remote:InvokeServer("CursedDualKatana", "1")
                    task.wait(1)
                    remote:InvokeServer("CursedDualKatana", "2")
                    Notify("‚úÖ CDK Obtida!")
                    _G.Settings.AutoGetCDK = false
                end
            end)
        end
    end
end)

-- =========================
-- AUTO GET SOUL GUITAR
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetSoulGuitar and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem Soul Guitar
                local hasGuitar = false
                for _, v in pairs(LocalPlayer.Backpack:GetChildren()) do
                    if v.Name == "Soul Guitar" then
                        hasGuitar = true
                        break
                    end
                end
                
                if hasGuitar then
                    Notify("‚úÖ Voc√™ j√° tem a Soul Guitar!")
                    _G.Settings.AutoGetSoulGuitar = false
                    return
                end
                
                -- Farmar fragmentos necess√°rios
                Notify("üìå Farmando fragmentos para Soul Guitar...")
                
                -- Ir para Haunted Castle
                TP(CFrame.new(-9515, 142, 5566))
                task.wait(2)
                
                -- Interagir com o puzzle
                remote:InvokeServer("gravestoneEvent", 1)
                task.wait(1)
                remote:InvokeServer("gravestoneEvent", 2)
                task.wait(1)
                
                -- Farmar Soul Reaper para conseguir Soul Guitar
                for _, boss in pairs(workspace.Enemies:GetChildren()) do
                    if boss.Name == "Soul Reaper" and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipWeapon()
                            boss.HumanoidRootPart.Size = Vector3.new(60,60,60)
                            LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                            _G.Settings.FastAttack = true
                        until not boss.Parent or boss.Humanoid.Health <= 0 or not _G.Settings.AutoGetSoulGuitar
                        _G.Settings.FastAttack = false
                    end
                end
                
                -- Comprar Soul Guitar
                task.wait(2)
                remote:InvokeServer("SoulGuitarShop", "Buy")
                Notify("‚úÖ Soul Guitar obtida!")
                _G.Settings.AutoGetSoulGuitar = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET DARK STEP V1
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetDarkStep then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Dark Step") or LocalPlayer.Character:FindFirstChild("Dark Step") then
                    Notify("‚úÖ Voc√™ j√° tem Dark Step!")
                    _G.Settings.AutoGetDarkStep = false
                    return
                end
                
                -- Requisitos: Level 150+, $150,000
                if LocalPlayer.Data.Level.Value < 150 then
                    Notify("‚ö†Ô∏è Precisa de Level 150+")
                    _G.Settings.AutoGetDarkStep = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 150000 then
                    Notify("‚ö†Ô∏è Precisa de $150,000")
                    _G.Settings.AutoGetDarkStep = false
                    return
                end
                
                -- Teleportar para o NPC
                if Sea == 1 then
                    TP(CFrame.new(-2209, 24, -3838)) -- Dark Step Teacher SEA 1
                elseif Sea == 2 then
                    TP(CFrame.new(-5439, 6, -2542)) -- Dark Step Teacher SEA 2
                else
                    TP(CFrame.new(-13580, 492, -5533)) -- Dark Step Teacher SEA 3
                end
                
                task.wait(2)
                remote:InvokeServer("BuyBlackLeg")
                Notify("‚úÖ Dark Step obtido!")
                _G.Settings.AutoGetDarkStep = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET ELECTRIC V1
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetElectric then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Electric") or LocalPlayer.Character:FindFirstChild("Electric") then
                    Notify("‚úÖ Voc√™ j√° tem Electric!")
                    _G.Settings.AutoGetElectric = false
                    return
                end
                
                -- Requisitos: Level 330+, $500,000
                if LocalPlayer.Data.Level.Value < 330 then
                    Notify("‚ö†Ô∏è Precisa de Level 330+")
                    _G.Settings.AutoGetElectric = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 500000 then
                    Notify("‚ö†Ô∏è Precisa de $500,000")
                    _G.Settings.AutoGetElectric = false
                    return
                end
                
                -- Teleportar para o NPC
                if Sea == 1 then
                    TP(CFrame.new(-5389, 314, -2967)) -- Electric Teacher SEA 1
                elseif Sea == 2 then
                    TP(CFrame.new(-5839, 12, -1954)) -- Electric Teacher SEA 2
                else
                    TP(CFrame.new(-12548, 337, -7481)) -- Electric Teacher SEA 3
                end
                
                task.wait(2)
                remote:InvokeServer("BuyElectro")
                Notify("‚úÖ Electric obtido!")
                _G.Settings.AutoGetElectric = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET WATER KUNG FU V1
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetWaterKungFu then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Fishman Karate") or LocalPlayer.Character:FindFirstChild("Fishman Karate") then
                    Notify("‚úÖ Voc√™ j√° tem Water Kung Fu!")
                    _G.Settings.AutoGetWaterKungFu = false
                    return
                end
                
                -- Requisitos: Level 400+, $750,000
                if LocalPlayer.Data.Level.Value < 400 then
                    Notify("‚ö†Ô∏è Precisa de Level 400+")
                    _G.Settings.AutoGetWaterKungFu = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 750000 then
                    Notify("‚ö†Ô∏è Precisa de $750,000")
                    _G.Settings.AutoGetWaterKungFu = false
                    return
                end
                
                -- Teleportar para Underwater City
                TP(CFrame.new(61164, 5, 1819))
                task.wait(2)
                remote:InvokeServer("BuyFishmanKarate")
                Notify("‚úÖ Water Kung Fu obtido!")
                _G.Settings.AutoGetWaterKungFu = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET DRAGON BREATH V1
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetDragonBreath then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Dragon Claw") or LocalPlayer.Character:FindFirstChild("Dragon Claw") then
                    Notify("‚úÖ Voc√™ j√° tem Dragon Breath!")
                    _G.Settings.AutoGetDragonBreath = false
                    return
                end
                
                -- Requisitos: Level 400+, $1,500,000
                if LocalPlayer.Data.Level.Value < 400 then
                    Notify("‚ö†Ô∏è Precisa de Level 400+")
                    _G.Settings.AutoGetDragonBreath = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 1500000 then
                    Notify("‚ö†Ô∏è Precisa de $1,500,000")
                    _G.Settings.AutoGetDragonBreath = false
                    return
                end
                
                -- Teleportar para Dragon Teacher
                if Sea == 1 then
                    TP(CFrame.new(-2970, 12, 5609)) -- Dragon Teacher SEA 1
                elseif Sea == 2 then
                    TP(CFrame.new(-5424, 6, -2552)) -- Dragon Teacher SEA 2
                else
                    TP(CFrame.new(-13395, 453, -7985)) -- Dragon Teacher SEA 3
                end
                
                task.wait(2)
                remote:InvokeServer("BlackbeardReward", "DragonClaw", "1")
                remote:InvokeServer("BlackbeardReward", "DragonClaw", "2")
                Notify("‚úÖ Dragon Breath obtido!")
                _G.Settings.AutoGetDragonBreath = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET SUPERHUMAN V1
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetSuperhuman then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Superhuman") or LocalPlayer.Character:FindFirstChild("Superhuman") then
                    Notify("‚úÖ Voc√™ j√° tem Superhuman!")
                    _G.Settings.AutoGetSuperhuman = false
                    return
                end
                
                -- Requisitos: Level 300+, $3,000,000, ter Dark Step, Electric e Water Kung Fu
                if LocalPlayer.Data.Level.Value < 300 then
                    Notify("‚ö†Ô∏è Precisa de Level 300+")
                    _G.Settings.AutoGetSuperhuman = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 3000000 then
                    Notify("‚ö†Ô∏è Precisa de $3,000,000")
                    _G.Settings.AutoGetSuperhuman = false
                    return
                end
                
                -- Verificar se tem os 3 estilos base
                local hasDarkStep = LocalPlayer.Backpack:FindFirstChild("Dark Step") or LocalPlayer.Character:FindFirstChild("Dark Step")
                local hasElectric = LocalPlayer.Backpack:FindFirstChild("Electric") or LocalPlayer.Character:FindFirstChild("Electric")
                local hasWaterKungFu = LocalPlayer.Backpack:FindFirstChild("Fishman Karate") or LocalPlayer.Character:FindFirstChild("Fishman Karate")
                
                if not (hasDarkStep and hasElectric and hasWaterKungFu) then
                    Notify("‚ö†Ô∏è Precisa ter Dark Step, Electric e Water Kung Fu primeiro!")
                    _G.Settings.AutoGetSuperhuman = false
                    return
                end
                
                -- Teleportar para Martial Arts Teacher
                if Sea == 2 then
                    TP(CFrame.new(-5424, 6, -2552))
                else
                    TP(CFrame.new(-13395, 453, -7985))
                end
                
                task.wait(2)
                remote:InvokeServer("BuySuperhuman")
                Notify("‚úÖ Superhuman obtido!")
                _G.Settings.AutoGetSuperhuman = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET DEATH STEP V2
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetDeathStep and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Death Step") or LocalPlayer.Character:FindFirstChild("Death Step") then
                    Notify("‚úÖ Voc√™ j√° tem Death Step!")
                    _G.Settings.AutoGetDeathStep = false
                    return
                end
                
                -- Requisitos: Level 1500+, $5,000,000, 300 Mastery em Dark Step
                if LocalPlayer.Data.Level.Value < 1500 then
                    Notify("‚ö†Ô∏è Precisa de Level 1500+")
                    _G.Settings.AutoGetDeathStep = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 5000000 then
                    Notify("‚ö†Ô∏è Precisa de $5,000,000")
                    _G.Settings.AutoGetDeathStep = false
                    return
                end
                
                -- Verificar se tem Dark Step
                if not (LocalPlayer.Backpack:FindFirstChild("Dark Step") or LocalPlayer.Character:FindFirstChild("Dark Step")) then
                    Notify("‚ö†Ô∏è Precisa ter Dark Step primeiro!")
                    _G.Settings.AutoGetDeathStep = false
                    return
                end
                
                -- Teleportar para Cipher Pol (NPC que ensina Death Step)
                TP(CFrame.new(-5362, 12, -5251)) -- Death Step Teacher SEA 3
                task.wait(2)
                
                -- Completar a quest
                remote:InvokeServer("BuyDeathStep")
                Notify("‚úÖ Death Step obtido!")
                _G.Settings.AutoGetDeathStep = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET SHARKMAN KARATE V2
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetSharkmanKarate and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Sharkman Karate") or LocalPlayer.Character:FindFirstChild("Sharkman Karate") then
                    Notify("‚úÖ Voc√™ j√° tem Sharkman Karate!")
                    _G.Settings.AutoGetSharkmanKarate = false
                    return
                end
                
                -- Requisitos: Level 1500+, $5,000,000, 300 Mastery em Fishman Karate
                if LocalPlayer.Data.Level.Value < 1500 then
                    Notify("‚ö†Ô∏è Precisa de Level 1500+")
                    _G.Settings.AutoGetSharkmanKarate = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 5000000 then
                    Notify("‚ö†Ô∏è Precisa de $5,000,000")
                    _G.Settings.AutoGetSharkmanKarate = false
                    return
                end
                
                -- Verificar se tem Fishman Karate
                if not (LocalPlayer.Backpack:FindFirstChild("Fishman Karate") or LocalPlayer.Character:FindFirstChild("Fishman Karate")) then
                    Notify("‚ö†Ô∏è Precisa ter Fishman Karate primeiro!")
                    _G.Settings.AutoGetSharkmanKarate = false
                    return
                end
                
                -- Teleportar para Daigrock (NPC que ensina Sharkman Karate)
                TP(CFrame.new(-13348, 332, -7627)) -- Sharkman Karate Teacher SEA 3
                task.wait(2)
                
                -- Completar a quest
                remote:InvokeServer("BuySharkmanKarate")
                Notify("‚úÖ Sharkman Karate obtido!")
                _G.Settings.AutoGetSharkmanKarate = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET DRAGON TALON V2
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetDragonTalon and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Dragon Talon") or LocalPlayer.Character:FindFirstChild("Dragon Talon") then
                    Notify("‚úÖ Voc√™ j√° tem Dragon Talon!")
                    _G.Settings.AutoGetDragonTalon = false
                    return
                end
                
                -- Requisitos: Level 1500+, $5,000,000, 300 Mastery em Dragon Claw
                if LocalPlayer.Data.Level.Value < 1500 then
                    Notify("‚ö†Ô∏è Precisa de Level 1500+")
                    _G.Settings.AutoGetDragonTalon = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 5000000 then
                    Notify("‚ö†Ô∏è Precisa de $5,000,000")
                    _G.Settings.AutoGetDragonTalon = false
                    return
                end
                
                -- Verificar se tem Dragon Claw
                if not (LocalPlayer.Backpack:FindFirstChild("Dragon Claw") or LocalPlayer.Character:FindFirstChild("Dragon Claw")) then
                    Notify("‚ö†Ô∏è Precisa ter Dragon Claw primeiro!")
                    _G.Settings.AutoGetDragonTalon = false
                    return
                end
                
                -- Teleportar para Uzoth (NPC que ensina Dragon Talon)
                TP(CFrame.new(-13341, 453, -7985)) -- Dragon Talon Teacher SEA 3
                task.wait(2)
                
                -- Completar a quest - Fire Essence puzzle
                remote:InvokeServer("BlackbeardReward", "DragonTalon", "1")
                task.wait(1)
                remote:InvokeServer("BlackbeardReward", "DragonTalon", "2")
                Notify("‚úÖ Dragon Talon obtido!")
                _G.Settings.AutoGetDragonTalon = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET ELECTRIC CLAW V2
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetElectricClaw and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Electric Claw") or LocalPlayer.Character:FindFirstChild("Electric Claw") then
                    Notify("‚úÖ Voc√™ j√° tem Electric Claw!")
                    _G.Settings.AutoGetElectricClaw = false
                    return
                end
                
                -- Requisitos: Level 1500+, $3,000,000, 300 Mastery em Electro, ter Ra√ßa de Cyborg
                if LocalPlayer.Data.Level.Value < 1500 then
                    Notify("‚ö†Ô∏è Precisa de Level 1500+")
                    _G.Settings.AutoGetElectricClaw = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 3000000 then
                    Notify("‚ö†Ô∏è Precisa de $3,000,000")
                    _G.Settings.AutoGetElectricClaw = false
                    return
                end
                
                -- Verificar se tem Electric
                if not (LocalPlayer.Backpack:FindFirstChild("Electric") or LocalPlayer.Character:FindFirstChild("Electric")) then
                    Notify("‚ö†Ô∏è Precisa ter Electric primeiro!")
                    _G.Settings.AutoGetElectricClaw = false
                    return
                end
                
                -- Teleportar para Mad Scientist (SEA 3)
                TP(CFrame.new(-12548, 337, -7481)) -- Electric Claw Teacher
                task.wait(2)
                
                -- Comprar Electric Claw
                remote:InvokeServer("BuyElectricClaw")
                Notify("‚úÖ Electric Claw obtido!")
                _G.Settings.AutoGetElectricClaw = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET GODHUMAN V3
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetGodhuman and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Godhuman") or LocalPlayer.Character:FindFirstChild("Godhuman") then
                    Notify("‚úÖ Voc√™ j√° tem Godhuman!")
                    _G.Settings.AutoGetGodhuman = false
                    return
                end
                
                -- Requisitos: Level 2200+, $5,000,000, ter todos os V2 (Death Step, Sharkman Karate, Dragon Talon, Electric Claw, Superhuman)
                if LocalPlayer.Data.Level.Value < 2200 then
                    Notify("‚ö†Ô∏è Precisa de Level 2200+")
                    _G.Settings.AutoGetGodhuman = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 5000000 then
                    Notify("‚ö†Ô∏è Precisa de $5,000,000")
                    _G.Settings.AutoGetGodhuman = false
                    return
                end
                
                -- Verificar se tem todos os estilos V2
                local hasDeathStep = LocalPlayer.Backpack:FindFirstChild("Death Step") or LocalPlayer.Character:FindFirstChild("Death Step")
                local hasSharkman = LocalPlayer.Backpack:FindFirstChild("Sharkman Karate") or LocalPlayer.Character:FindFirstChild("Sharkman Karate")
                local hasDragonTalon = LocalPlayer.Backpack:FindFirstChild("Dragon Talon") or LocalPlayer.Character:FindFirstChild("Dragon Talon")
                local hasElectricClaw = LocalPlayer.Backpack:FindFirstChild("Electric Claw") or LocalPlayer.Character:FindFirstChild("Electric Claw")
                local hasSuperhuman = LocalPlayer.Backpack:FindFirstChild("Superhuman") or LocalPlayer.Character:FindFirstChild("Superhuman")
                
                if not (hasDeathStep and hasSharkman and hasDragonTalon and hasElectricClaw and hasSuperhuman) then
                    Notify("‚ö†Ô∏è Precisa ter TODOS os estilos V2 + Superhuman!")
                    _G.Settings.AutoGetGodhuman = false
                    return
                end
                
                -- Teleportar para Ancient Monk
                TP(CFrame.new(-12361, 603, -6550)) -- Godhuman Teacher SEA 3
                task.wait(2)
                
                -- Comprar Godhuman
                remote:InvokeServer("BuyGodhuman")
                Notify("‚úÖ Godhuman obtido!")
                _G.Settings.AutoGetGodhuman = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET SANGUINE ART V3
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetSanguineArt and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Sanguine Art") or LocalPlayer.Character:FindFirstChild("Sanguine Art") then
                    Notify("‚úÖ Voc√™ j√° tem Sanguine Art!")
                    _G.Settings.AutoGetSanguineArt = false
                    return
                end
                
                -- Requisitos: Level 2200+, ra√ßa Ghoul V4, completar trial
                if LocalPlayer.Data.Level.Value < 2200 then
                    Notify("‚ö†Ô∏è Precisa de Level 2200+")
                    _G.Settings.AutoGetSanguineArt = false
                    return
                end
                
                -- Verificar ra√ßa Ghoul
                local race = LocalPlayer.Data.Race.Value
                if race ~= "Ghoul" then
                    Notify("‚ö†Ô∏è Precisa ser ra√ßa Ghoul!")
                    _G.Settings.AutoGetSanguineArt = false
                    return
                end
                
                -- Teleportar para Graveyard
                TP(CFrame.new(-5560, 314, -2733))
                task.wait(2)
                
                -- Fazer a quest do Dough King
                Notify("üìå Farmando Dough King para Sanguine Art...")
                for _, boss in pairs(workspace.Enemies:GetChildren()) do
                    if boss.Name == "Dough King" and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipWeapon()
                            boss.HumanoidRootPart.Size = Vector3.new(60,60,60)
                            LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                            _G.Settings.FastAttack = true
                        until not boss.Parent or boss.Humanoid.Health <= 0 or not _G.Settings.AutoGetSanguineArt
                        _G.Settings.FastAttack = false
                    end
                end
                
                -- Comprar Sanguine Art ap√≥s derrotar Dough King
                task.wait(2)
                remote:InvokeServer("BuySanguineArt")
                Notify("‚úÖ Sanguine Art obtido!")
                _G.Settings.AutoGetSanguineArt = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET TTK (TRIPLE KATANA)
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetTTK and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem
                if LocalPlayer.Backpack:FindFirstChild("Triple Katana") or LocalPlayer.Character:FindFirstChild("Triple Katana") then
                    Notify("‚úÖ Voc√™ j√° tem Triple Katana!")
                    _G.Settings.AutoGetTTK = false
                    return
                end
                
                -- Requisitos: Level 1800+, 300 Mastery em pelo menos 3 espadas diferentes
                if LocalPlayer.Data.Level.Value < 1800 then
                    Notify("‚ö†Ô∏è Precisa de Level 1800+")
                    _G.Settings.AutoGetTTK = false
                    return
                end
                
                -- Teleportar para Mysterious Man (Haunted Castle)
                TP(CFrame.new(-9515, 142, 5566))
                task.wait(2)
                
                -- Comprar Triple Katana
                remote:InvokeServer("BuyTripleKatana")
                Notify("‚úÖ Triple Katana obtida!")
                _G.Settings.AutoGetTTK = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET RACE V2
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetRaceV2 and Sea == 2 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem V2
                if LocalPlayer.Data.Race.Value and LocalPlayer.Data.Race.Value:find("V2") then
                    Notify("‚úÖ Voc√™ j√° tem Ra√ßa V2!")
                    _G.Settings.AutoGetRaceV2 = false
                    return
                end
                
                -- Requisitos: Level 1000+, $3,000,000
                if LocalPlayer.Data.Level.Value < 1000 then
                    Notify("‚ö†Ô∏è Precisa de Level 1000+")
                    _G.Settings.AutoGetRaceV2 = false
                    return
                end
                
                if LocalPlayer.Data.Beli.Value < 3000000 then
                    Notify("‚ö†Ô∏è Precisa de $3,000,000")
                    _G.Settings.AutoGetRaceV2 = false
                    return
                end
                
                -- Teleportar para Experimic (SEA 2)
                TP(CFrame.new(-2836, 14, -3036)) -- Race Awakening NPC
                task.wait(2)
                
                -- Comprar V2
                remote:InvokeServer("Wenlocktoad", "1")
                task.wait(1)
                remote:InvokeServer("Wenlocktoad", "2")
                Notify("‚úÖ Ra√ßa V2 obtida!")
                _G.Settings.AutoGetRaceV2 = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET RACE V3
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetRaceV3 and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem V3
                if LocalPlayer.Data.Race.Value and LocalPlayer.Data.Race.Value:find("V3") then
                    Notify("‚úÖ Voc√™ j√° tem Ra√ßa V3!")
                    _G.Settings.AutoGetRaceV3 = false
                    return
                end
                
                -- Verificar se tem V2
                if not (LocalPlayer.Data.Race.Value and LocalPlayer.Data.Race.Value:find("V2")) then
                    Notify("‚ö†Ô∏è Precisa ter Ra√ßa V2 primeiro!")
                    _G.Settings.AutoGetRaceV3 = false
                    return
                end
                
                -- Requisitos: Level 1500+, completar Arowe's Quest
                if LocalPlayer.Data.Level.Value < 1500 then
                    Notify("‚ö†Ô∏è Precisa de Level 1500+")
                    _G.Settings.AutoGetRaceV3 = false
                    return
                end
                
                -- Teleportar para Great Tree (Arowe's location)
                TP(CFrame.new(2681, 1682, -7190))
                task.wait(2)
                
                -- Pegar a quest do Arowe
                remote:InvokeServer("Arowe", "1")
                task.wait(1)
                
                -- Completar a quest baseado na ra√ßa
                local race = LocalPlayer.Data.Race.Value
                
                if race:find("Human") then
                    -- Matar 2 Don Swans
                    Notify("üìå Matando Don Swans para V3...")
                    local donSwanKills = 0
                    while donSwanKills < 2 and _G.Settings.AutoGetRaceV3 do
                        for _, boss in pairs(workspace.Enemies:GetChildren()) do
                            if boss.Name == "Don Swan" and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                                repeat
                                    task.wait()
                                    EquipWeapon()
                                    boss.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                    _G.Settings.FastAttack = true
                                until not boss.Parent or boss.Humanoid.Health <= 0 or not _G.Settings.AutoGetRaceV3
                                _G.Settings.FastAttack = false
                                donSwanKills = donSwanKills + 1
                            end
                        end
                        task.wait(5)
                    end
                    
                elseif race:find("Fishman") then
                    -- Ganhar √°gua usando Water Key
                    Notify("üìå Completando puzzle da √°gua...")
                    TP(CFrame.new(-3602, 239, -10156))
                    task.wait(2)
                    remote:InvokeServer("Arowe", "2")
                    
                elseif race:find("Skypiea") or race:find("Sky") then
                    -- Ir para as nuvens
                    Notify("üìå Indo para as nuvens...")
                    TP(CFrame.new(-7894, 5547, -379))
                    task.wait(5)
                    remote:InvokeServer("Arowe", "2")
                    
                elseif race:find("Mink") then
                    -- Acertar 30 hits consecutivos usando Combat
                    Notify("üìå Completando desafio de combate...")
                    TP(CFrame.new(-2103, 38, -10192))
                    task.wait(2)
                    -- Equipar Combat
                    for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
                        if tool:IsA("Tool") and tool.ToolTip == "Melee" then
                            LocalPlayer.Character.Humanoid:EquipTool(tool)
                            break
                        end
                    end
                    task.wait(1)
                    remote:InvokeServer("Arowe", "2")
                    
                elseif race:find("Ghoul") then
                    -- Matar 3 bosses durante a noite
                    Notify("üìå Matando bosses durante a noite...")
                    local bossKills = 0
                    while bossKills < 3 and _G.Settings.AutoGetRaceV3 do
                        -- Esperar pela noite
                        while Lighting.ClockTime < 18 and Lighting.ClockTime >= 6 do
                            task.wait(1)
                        end
                        
                        for _, boss in pairs(workspace.Enemies:GetChildren()) do
                            if boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 and boss:FindFirstChild("HumanoidRootPart") then
                                local isBoss = false
                                for _, bossName in pairs(BossList) do
                                    if boss.Name == bossName then
                                        isBoss = true
                                        break
                                    end
                                end
                                
                                if isBoss then
                                    repeat
                                        task.wait()
                                        EquipWeapon()
                                        boss.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                        LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                        _G.Settings.FastAttack = true
                                    until not boss.Parent or boss.Humanoid.Health <= 0 or not _G.Settings.AutoGetRaceV3
                                    _G.Settings.FastAttack = false
                                    bossKills = bossKills + 1
                                    break
                                end
                            end
                        end
                        task.wait(5)
                    end
                    
                elseif race:find("Cyborg") then
                    -- Ganhar 5000 fragmentos
                    Notify("üìå Farmando fragmentos...")
                    while LocalPlayer.Data.Fragments.Value < 5000 and _G.Settings.AutoGetRaceV3 do
                        -- Farmar raids ou sea beasts
                        task.wait(5)
                    end
                end
                
                -- Completar a quest
                task.wait(2)
                TP(CFrame.new(2681, 1682, -7190))
                task.wait(2)
                remote:InvokeServer("Arowe", "3")
                Notify("‚úÖ Ra√ßa V3 obtida!")
                _G.Settings.AutoGetRaceV3 = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET RACE V4
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoGetRaceV4 and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se j√° tem V4
                if LocalPlayer.Data.Race.Value and LocalPlayer.Data.Race.Value:find("V4") then
                    Notify("‚úÖ Voc√™ j√° tem Ra√ßa V4!")
                    _G.Settings.AutoGetRaceV4 = false
                    return
                end
                
                -- Verificar se tem V3
                if not (LocalPlayer.Data.Race.Value and LocalPlayer.Data.Race.Value:find("V3")) then
                    Notify("‚ö†Ô∏è Precisa ter Ra√ßa V3 primeiro!")
                    _G.Settings.AutoGetRaceV4 = false
                    return
                end
                
                -- Requisitos: Level 2000+, completar Temple of Time trial
                if LocalPlayer.Data.Level.Value < 2000 then
                    Notify("‚ö†Ô∏è Precisa de Level 2000+")
                    _G.Settings.AutoGetRaceV4 = false
                    return
                end
                
                -- Encontrar Mirage Island
                Notify("üìå Procurando Mirage Island...")
                local mirageFound = false
                for _, v in pairs(workspace:GetChildren()) do
                    if v.Name == "MysticIsland" then
                        TP(v:FindFirstChild("Center") and v.Center.CFrame or CFrame.new(v:GetModelCFrame().Position))
                        mirageFound = true
                        Notify("‚úÖ Mirage encontrada!")
                        break
                    end
                end
                
                if not mirageFound then
                    Notify("‚ö†Ô∏è Mirage Island n√£o spawnou ainda!")
                    return
                end
                
                -- Ir para Temple of Time (dentro da Mirage)
                task.wait(2)
                TP(CFrame.new(-5413, 314, -2823)) -- Temple entrance
                task.wait(2)
                
                -- Completar o trial baseado na ra√ßa
                local race = LocalPlayer.Data.Race.Value
                Notify("üìå Completando trial de " .. race .. "...")
                
                -- Puxar alavanca do trial
                remote:InvokeServer("TempleOfTime", "1")
                task.wait(2)
                
                -- Trial espec√≠fico por ra√ßa
                if race:find("Human") then
                    -- Sobreviver por 5 minutos
                    Notify("‚è±Ô∏è Sobreviva por 5 minutos!")
                    task.wait(300)
                    
                elseif race:find("Fishman") then
                    -- Coletar 20 esferas de √°gua
                    Notify("üíß Colete 20 esferas de √°gua!")
                    local collected = 0
                    while collected < 20 and _G.Settings.AutoGetRaceV4 do
                        for _, orb in pairs(workspace:GetChildren()) do
                            if orb.Name == "WaterOrb" then
                                TP(orb.CFrame)
                                task.wait(0.5)
                                collected = collected + 1
                            end
                        end
                        task.wait(1)
                    end
                    
                elseif race:find("Skypiea") or race:find("Sky") then
                    -- N√£o tocar no ch√£o por 2 minutos
                    Notify("‚òÅÔ∏è N√£o toque no ch√£o por 2 minutos!")
                    local startTime = tick()
                    while tick() - startTime < 120 and _G.Settings.AutoGetRaceV4 do
                        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                            LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, 50, 0)
                        end
                        task.wait(0.5)
                    end
                    
                elseif race:find("Mink") then
                    -- Completar em menos de 2 minutos
                    Notify("‚ö° Complete em menos de 2 minutos!")
                    -- Speed run do trial
                    task.wait(1)
                    
                elseif race:find("Ghoul") then
                    -- Matar 10 inimigos
                    Notify("üíÄ Mate 10 inimigos!")
                    local kills = 0
                    while kills < 10 and _G.Settings.AutoGetRaceV4 do
                        for _, mob in pairs(workspace.Enemies:GetChildren()) do
                            if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                                repeat
                                    task.wait()
                                    EquipWeapon()
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                    _G.Settings.FastAttack = true
                                until not mob.Parent or mob.Humanoid.Health <= 0 or kills >= 10
                                _G.Settings.FastAttack = false
                                kills = kills + 1
                                break
                            end
                        end
                        task.wait(1)
                    end
                    
                elseif race:find("Cyborg") then
                    -- Hackear 3 terminais
                    Notify("ü§ñ Hackear 3 terminais!")
                    local hacked = 0
                    while hacked < 3 and _G.Settings.AutoGetRaceV4 do
                        for _, terminal in pairs(workspace:GetDescendants()) do
                            if terminal.Name == "Terminal" and terminal:FindFirstChild("Part") then
                                TP(terminal.Part.CFrame)
                                task.wait(1)
                                remote:InvokeServer("TempleOfTime", "Hack")
                                hacked = hacked + 1
                                task.wait(2)
                                break
                            end
                        end
                        task.wait(1)
                    end
                end
                
                -- Completar trial
                task.wait(2)
                remote:InvokeServer("TempleOfTime", "Complete")
                Notify("‚úÖ Ra√ßa V4 obtida!")
                _G.Settings.AutoGetRaceV4 = false
            end)
        end
    end
end)

-- =========================
-- AUTO RAID SYSTEM
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoRaid and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Verificar se tem chip
                local hasChip = false
                local chipName = _G.Settings.SelectedRaidChip .. " Microchip"
                
                for _, item in pairs(LocalPlayer.Backpack:GetChildren()) do
                    if item.Name == chipName then
                        hasChip = true
                        break
                    end
                end
                
                if not hasChip then
                    Notify("‚ö†Ô∏è Voc√™ n√£o tem " .. chipName .. "!")
                    _G.Settings.AutoRaid = false
                    return
                end
                
                -- Ir para Mysterious Scientist
                TP(CFrame.new(-6438, 250, -4498)) -- Raid entrance
                task.wait(2)
                
                -- Iniciar raid
                remote:InvokeServer("Raids", "Start", _G.Settings.SelectedRaidChip)
                task.wait(5)
                
                -- Loop de raid
                while _G.Settings.AutoRaid do
                    -- Procurar pr√≥xima ilha do raid
                    local raidIsland = nil
                    for _, v in pairs(workspace:GetChildren()) do
                        if v.Name == "Island" and v:FindFirstChild("RaidIsland") then
                            raidIsland = v
                            break
                        end
                    end
                    
                    if raidIsland then
                        TP(raidIsland:GetModelCFrame())
                        task.wait(1)
                        
                        -- Matar todos os mobs da ilha
                        for _, mob in pairs(workspace.Enemies:GetChildren()) do
                            if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 and mob:FindFirstChild("HumanoidRootPart") then
                                repeat
                                    task.wait()
                                    EquipWeapon()
                                    mob.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                    _G.Settings.FastAttack = true
                                until not mob.Parent or mob.Humanoid.Health <= 0 or not _G.Settings.AutoRaid
                                _G.Settings.FastAttack = false
                            end
                        end
                    else
                        -- Raid completado
                        Notify("‚úÖ Raid completado!")
                        break
                    end
                    
                    task.wait(2)
                end
            end)
        end
    end
end)

-- =========================
-- AUTO DUNGEON
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoDungeon and Sea == 3 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Ir para Castle on the Sea
                TP(CFrame.new(-5075, 314, -3155))
                task.wait(2)
                
                -- Entrar no dungeon
                remote:InvokeServer("DungeonEntrance")
                task.wait(5)
                
                -- Completar dungeon
                while _G.Settings.AutoDungeon do
                    -- Matar todos os mobs do dungeon
                    for _, mob in pairs(workspace.Enemies:GetChildren()) do
                        if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 and mob:FindFirstChild("HumanoidRootPart") then
                            repeat
                                task.wait()
                                EquipWeapon()
                                mob.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                LocalPlayer.Character.HumanoidRootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                _G.Settings.FastAttack = true
                            until not mob.Parent or mob.Humanoid.Health <= 0 or not _G.Settings.AutoDungeon
                            _G.Settings.FastAttack = false
                        end
                    end
                    
                    task.wait(2)
                    
                    -- Verificar se terminou
                    if not workspace:FindFirstChild("DungeonActive") then
                        Notify("‚úÖ Dungeon completado!")
                        break
                    end
                end
            end)
        end
    end
end)

-- =========================
-- AUTO GET TO SEA 2
-- =========================
task.spawn(function()
    while task.wait(10) do
        if _G.Settings.AutoGetToSea2 and Sea == 1 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Requisitos: Level 700+
                if LocalPlayer.Data.Level.Value < 700 then
                    Notify("‚ö†Ô∏è Precisa de Level 700+ para ir ao Sea 2!")
                    return
                end
                
                -- Ir para King Red Head (Pirate) ou Vice Admiral (Marine)
                Notify("üìå Indo para o barco do Sea 2...")
                
                -- Verificar se √© pirata ou marine
                local playerSide = LocalPlayer.Team.Name
                
                if playerSide == "Pirates" then
                    -- Teleportar para King Red Head
                    TP(CFrame.new(-5058, 314, -3155))
                    task.wait(2)
                    remote:InvokeServer("TravelDressrosa")
                else
                    -- Teleportar para Vice Admiral
                    TP(CFrame.new(-3000, 73, -3000))
                    task.wait(2)
                    remote:InvokeServer("TravelDressrosa")
                end
                
                Notify("‚úÖ Indo para o Sea 2!")
                _G.Settings.AutoGetToSea2 = false
            end)
        end
    end
end)

-- =========================
-- AUTO GET TO SEA 3
-- =========================
task.spawn(function()
    while task.wait(10) do
        if _G.Settings.AutoGetToSea3 and Sea == 2 then
            pcall(function()
                local remote = GetRemote()
                if not remote then return end
                
                -- Requisitos: Level 1500+
                if LocalPlayer.Data.Level.Value < 1500 then
                    Notify("‚ö†Ô∏è Precisa de Level 1500+ para ir ao Sea 3!")
                    return
                end
                
                -- Ir para King Red Head (Pirate) ou Vice Admiral (Marine)
                Notify("üìå Indo para o barco do Sea 3...")
                
                -- Verificar se √© pirata ou marine
                local playerSide = LocalPlayer.Team.Name
                
                if playerSide == "Pirates" then
                    TP(CFrame.new(-5058, 314, -3155))
                    task.wait(2)
                    remote:InvokeServer("TravelZou")
                else
                    TP(CFrame.new(-3000, 73, -3000))
                    task.wait(2)
                    remote:InvokeServer("TravelZou")
                end
                
                Notify("‚úÖ Indo para o Sea 3!")
                _G.Settings.AutoGetToSea3 = false
            end)
        end
    end
end)

-- =========================
-- GUI PRINCIPAL
-- =========================
local Gui = Instance.new("ScreenGui")
Gui.Name = "LagTeckHub_" .. tick()
Gui.ResetOnSpawn = false

pcall(function()
    for _, v in pairs(game:GetService("CoreGui"):GetChildren()) do
        if v.Name:find("LagTeckHub") then
            v:Destroy()
        end
    end
end)

local success = pcall(function()
    Gui.Parent = game:GetService("CoreGui")
end)

if not success then
    Gui.Parent = LocalPlayer:WaitForChild("PlayerGui")
end

-- =========================
-- BOLINHA (BOT√ÉO FLUTUANTE)
-- =========================
local Bubble = Instance.new("ImageButton", Gui)
Bubble.Size = UDim2.fromOffset(50, 50)
Bubble.Position = UDim2.new(0, 20, 0.5, -25)
Bubble.Image = "rbxassetid://118708232212462"
Bubble.BackgroundColor3 = Config.Tema.Botao
Bubble.BorderSizePixel = 0
Bubble.Active = true
Bubble.Draggable = true
Bubble.ZIndex = 999

Instance.new("UICorner", Bubble).CornerRadius = UDim.new(1, 0)

-- =========================
-- PAINEL PRINCIPAL
-- =========================
local Main = Instance.new("Frame", Gui)
Main.Size = UDim2.fromOffset(PanelWidth, PanelHeight) 
Main.Position = UDim2.new(0.5, -PanelWidth/2, 0.5, -PanelHeight/2)
Main.BackgroundColor3 = Config.Tema.Fundo
Main.BackgroundTransparency = 0.05  -- MAIS VIS√çVEL (era 0.15)
Main.BorderSizePixel = 0
Main.Visible = false
Main.ZIndex = 1000
Main.Active = true
Main.ClipsDescendants = false

Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)

-- BORDA BRANCA SUTIL
local Border = Instance.new("UIStroke", Main)
Border.Color = Color3.fromRGB(255, 255, 255)
Border.Thickness = 2
Border.Transparency = 0.7
Border.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-- =========================
-- HANDLE DE REDIMENSIONAR
-- =========================
local ResizeHandle = Instance.new("Frame", Main)
ResizeHandle.Size = UDim2.fromOffset(15, 15)
ResizeHandle.Position = UDim2.new(1, -15, 1, -15)
ResizeHandle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ResizeHandle.BackgroundTransparency = 0.5
ResizeHandle.BorderSizePixel = 0
ResizeHandle.ZIndex = 5000  -- MUITO ALTO, MAS S√ì NO CANTO
ResizeHandle.Active = true  -- ADICIONADO

Instance.new("UICorner", ResizeHandle).CornerRadius = UDim.new(0, 4)

local resizing = false
local resizeStart, startSize

ResizeHandle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        resizing = true
        resizeStart = input.Position
        startSize = Main.AbsoluteSize
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                resizing = false
            end
        end)
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if resizing and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - resizeStart
        local newW = math.clamp(startSize.X + delta.X, MinWidth, MaxWidth)
        local newH = math.clamp(startSize.Y + delta.Y, MinHeight, MaxHeight)
        
        Main.Size = UDim2.fromOffset(newW, newH)
        PanelWidth = newW
        PanelHeight = newH
    end
end)

-- =========================
-- TOP BAR
-- =========================
local Top = Instance.new("Frame", Main)
Top.Size = UDim2.new(1, 0, 0, 50)
Top.BackgroundColor3 = Config.Tema.Secundario
Top.BackgroundTransparency = 0
Top.BorderSizePixel = 0
Top.ZIndex = 1001
Top.Visible = true

Instance.new("UICorner", Top).CornerRadius = UDim.new(0, 12)

local Title = Instance.new("TextLabel", Top)
Title.Size = UDim2.new(1, -150, 0, 20)
Title.Position = UDim2.fromOffset(10, 5)
Title.Text = "Script Lag Teck"
Title.TextColor3 = Config.Tema.Texto
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 14
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.TextYAlignment = Enum.TextYAlignment.Top

-- DISCORD CLIC√ÅVEL
local DiscordLink = Instance.new("TextButton", Top)
DiscordLink.Size = UDim2.new(0, 180, 0, 18)
DiscordLink.Position = UDim2.new(0, 10, 0, 27)
DiscordLink.Text = "discord.gg/RnZ6XHHFj7"
DiscordLink.TextColor3 = Color3.fromRGB(100, 180, 255)
DiscordLink.BackgroundTransparency = 1
DiscordLink.Font = Enum.Font.GothamBold
DiscordLink.TextSize = 9
DiscordLink.TextXAlignment = Enum.TextXAlignment.Left
DiscordLink.AutoButtonColor = false

DiscordLink.MouseButton1Click:Connect(function()
    pcall(function() setclipboard("https://discord.gg/RnZ6XHHFj7") end)
    Notify("‚úÖ Discord copiado!")
end)

DiscordLink.MouseEnter:Connect(function()
    DiscordLink.TextColor3 = Color3.fromRGB(150, 220, 255)
end)

DiscordLink.MouseLeave:Connect(function()
    DiscordLink.TextColor3 = Color3.fromRGB(100, 180, 255)
end)

local SeaLabel = Instance.new("TextLabel", Top)
SeaLabel.Size = UDim2.fromOffset(65, 28)
SeaLabel.Position = UDim2.new(1, -170, 0, 11)
SeaLabel.Text = "SEA " .. Sea
SeaLabel.TextColor3 = Color3.new(1, 1, 1)
SeaLabel.BackgroundColor3 = Config.Tema.Ativo
SeaLabel.Font = Enum.Font.GothamBold
SeaLabel.TextSize = 12
SeaLabel.BorderSizePixel = 0

Instance.new("UICorner", SeaLabel).CornerRadius = UDim.new(0, 6)

-- BOT√ïES DE CONTROLE
local MinBtn = Instance.new("TextButton", Top)
MinBtn.Size = UDim2.fromOffset(28, 28)
MinBtn.Position = UDim2.new(1, -98, 0, 11)
MinBtn.Text = "‚àí"
MinBtn.TextSize = 18
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextColor3 = Color3.new(1, 1, 1)
MinBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
MinBtn.BorderSizePixel = 0

Instance.new("UICorner", MinBtn).CornerRadius = UDim.new(0, 6)

local MaxBtn = Instance.new("TextButton", Top)
MaxBtn.Size = UDim2.fromOffset(28, 28)
MaxBtn.Position = UDim2.new(1, -65, 0, 11)
MaxBtn.Text = "+"
MaxBtn.TextSize = 18
MaxBtn.Font = Enum.Font.GothamBold
MaxBtn.TextColor3 = Color3.new(1, 1, 1)
MaxBtn.BackgroundColor3 = Color3.fromRGB(100, 150, 100)
MaxBtn.BorderSizePixel = 0
MaxBtn.Visible = false

Instance.new("UICorner", MaxBtn).CornerRadius = UDim.new(0, 6)

local CloseBtn = Instance.new("TextButton", Top)
CloseBtn.Size = UDim2.fromOffset(28, 28)
CloseBtn.Position = UDim2.new(1, -32, 0, 11)
CloseBtn.Text = "‚úï"
CloseBtn.TextSize = 14
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextColor3 = Color3.new(1, 1, 1)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseBtn.BorderSizePixel = 0

Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0, 6)

-- =========================
-- BODY
-- =========================
local Body = Instance.new("Frame", Main)
Body.Position = UDim2.fromOffset(0, 55)
Body.Size = UDim2.new(1, 0, 1, -55)
Body.BackgroundTransparency = 1
Body.Visible = true
Body.ZIndex = 1
Body.ClipsDescendants = false

-- =========================
-- SEARCH BAR
-- =========================
local Search = Instance.new("TextBox", Body)
Search.Size = UDim2.new(1, -20, 0, 35)
Search.Position = UDim2.fromOffset(10, 5)
Search.PlaceholderText = "üîç Pesquisar..."
Search.Text = ""
Search.BackgroundColor3 = Config.Tema.Botao
Search.BackgroundTransparency = 0
Search.TextColor3 = Config.Tema.Texto
Search.BorderSizePixel = 0
Search.Font = Enum.Font.Gotham
Search.TextSize = 12

Instance.new("UICorner", Search).CornerRadius = UDim.new(0, 8)

-- =========================
-- TAB BAR (LISTA DE ABAS)
-- =========================
local TabBar = Instance.new("ScrollingFrame", Body)
TabBar.Position = UDim2.fromOffset(10, 45)
TabBar.Size = UDim2.new(0, 90, 1, -55)
TabBar.BackgroundTransparency = 1
TabBar.BorderSizePixel = 0
TabBar.ScrollBarThickness = 3
TabBar.CanvasSize = UDim2.fromOffset(0, 0)
TabBar.ZIndex = 2
TabBar.Visible = true

local TabLayout = Instance.new("UIListLayout", TabBar)
TabLayout.Padding = UDim.new(0, 4)

TabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    TabBar.CanvasSize = UDim2.fromOffset(0, TabLayout.AbsoluteContentSize.Y + 10)
end)

-- =========================
-- CONTENT (√ÅREA DAS ABAS)
-- =========================
local Content = Instance.new("Frame", Body)
Content.Position = UDim2.fromOffset(110, 45)
Content.Size = UDim2.new(1, -120, 1, -55)
Content.BackgroundTransparency = 1
Content.ZIndex = 2
Content.Visible = true

local Tabs = {}
local SelectedOptions = {}

-- =========================
-- FUN√á√ïES DE COMPONENTES GUI
-- =========================
local function CriarAba(nome)
    local Btn = Instance.new("TextButton", TabBar)
    Btn.Size = UDim2.new(1, 0, 0, 35)
    Btn.Text = nome
    Btn.BackgroundColor3 = Config.Tema.Botao
    Btn.BackgroundTransparency = 0
    Btn.TextColor3 = Config.Tema.Texto
    Btn.BorderSizePixel = 0
    Btn.Font = Enum.Font.Gotham
    Btn.TextSize = 9
    Btn.AutoButtonColor = false
    Btn.ZIndex = 1003  -- AUMENTADO
    Btn.Visible = true

    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 6)

    local Frame = Instance.new("ScrollingFrame", Content)
    Frame.Size = UDim2.fromScale(1, 1)
    Frame.CanvasSize = UDim2.fromScale(0, 0)
    Frame.ScrollBarThickness = 4
    Frame.ScrollBarImageColor3 = Config.Tema.Ativo
    Frame.Visible = false
    Frame.BackgroundTransparency = 1
    Frame.BorderSizePixel = 0
    Frame.ZIndex = 1003  -- AUMENTADO

    local Layout = Instance.new("UIListLayout", Frame)
    Layout.Padding = UDim.new(0, 5)
    Layout.SortOrder = Enum.SortOrder.LayoutOrder  -- ADICIONADO
    
    Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        Frame.CanvasSize = UDim2.fromOffset(0, Layout.AbsoluteContentSize.Y + 10)
    end)

    Btn.MouseButton1Click:Connect(function()
        for _, v in pairs(Tabs) do
            v.Frame.Visible = false
            Tween(v.Btn, 0.2, {BackgroundColor3 = Config.Tema.Botao})
        end
        Frame.Visible = true
        Tween(Btn, 0.2, {BackgroundColor3 = Config.Tema.Ativo})
    end)

    Tabs[nome] = {Frame = Frame, Btn = Btn}
    return Frame
end

local SelectedFrame

local function AddToSelected(name, settingKey)
    if SelectedFrame and not SelectedOptions[name] then
        local Box = Instance.new("Frame", SelectedFrame)
        Box.Size = UDim2.new(1, 0, 0, 40)
        Box.BackgroundColor3 = Config.Tema.Ativo
        Box.BackgroundTransparency = 0
        Box.BorderSizePixel = 0
        
        Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 6)
        
        local Label = Instance.new("TextLabel", Box)
        Label.Size = UDim2.new(1, -10, 1, 0)
        Label.Position = UDim2.fromOffset(5, 0)
        Label.Text = "‚úì " .. name
        Label.TextColor3 = Color3.new(1, 1, 1)
        Label.BackgroundTransparency = 1
        Label.Font = Enum.Font.GothamBold
        Label.TextSize = 10
        Label.TextXAlignment = Enum.TextXAlignment.Left
        Label.TextWrapped = true
        
        SelectedOptions[name] = {Box = Box, SettingKey = settingKey}
    end
end

local function RemoveFromSelected(name)
    if SelectedOptions[name] then
        SelectedOptions[name].Box:Destroy()
        SelectedOptions[name] = nil
    end
end

local function Toggle(parent, texto, callback, settingKey)
    local Box = Instance.new("Frame", parent)
    Box.Size = UDim2.new(1, 0, 0, 45)
    Box.BackgroundColor3 = Config.Tema.Botao
    Box.BackgroundTransparency = 0
    Box.BorderSizePixel = 0
    Box.ZIndex = 1004  -- ADICIONADO
    
    Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 6)

    local Label = Instance.new("TextLabel", Box)
    Label.Size = UDim2.new(1, -60, 1, 0)
    Label.Position = UDim2.fromOffset(8, 0)
    Label.Text = texto
    Label.BackgroundTransparency = 1
    Label.TextColor3 = Config.Tema.Texto
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 10
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.TextWrapped = true
    Label.ZIndex = 1005  -- ADICIONADO

    local Btn = Instance.new("TextButton", Box)
    Btn.Size = UDim2.fromOffset(40, 20)
    Btn.Position = UDim2.new(1, -45, 0.5, -10)
    Btn.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
    Btn.Text = ""
    Btn.BorderSizePixel = 0
    Btn.AutoButtonColor = false
    Btn.ZIndex = 1006  -- ADICIONADO - MAIS ALTO
    
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(1, 0)
    
    local Circle = Instance.new("Frame", Btn)
    Circle.Size = UDim2.fromOffset(16, 16)
    Circle.Position = UDim2.fromOffset(2, 2)
    Circle.BackgroundColor3 = Color3.new(1, 1, 1)
    Circle.BorderSizePixel = 0
    Circle.ZIndex = 1007  -- ADICIONADO
    
    Instance.new("UICorner", Circle).CornerRadius = UDim.new(1, 0)
    
    local enabled = false
    
    -- Carregar estado salvo
    if settingKey and _G.Settings[settingKey] then
        enabled = true
        Circle.Position = UDim2.fromOffset(22, 2)
        Btn.BackgroundColor3 = Config.Tema.Ativo
        AddToSelected(texto, settingKey)
    end
    
    Btn.MouseButton1Click:Connect(function()
        enabled = not enabled
        
        if enabled then
            Tween(Circle, 0.2, {Position = UDim2.fromOffset(22, 2)})
            Tween(Btn, 0.2, {BackgroundColor3 = Config.Tema.Ativo})
            Notify("‚úÖ " .. texto .. " ATIVADO!")
            if settingKey then
                AddToSelected(texto, settingKey)
            end
        else
            Tween(Circle, 0.2, {Position = UDim2.fromOffset(2, 2)})
            Tween(Btn, 0.2, {BackgroundColor3 = Color3.fromRGB(120, 120, 120)})
            Notify("‚ùå " .. texto .. " DESATIVADO!")
            if settingKey then
                RemoveFromSelected(texto)
            end
        end
        
        if callback then
            task.spawn(function() callback(enabled) end)
        end
        
        SaveConfig()
    end)
end

local function Dropdown(parent, texto, options, callback, settingKey)
    local Box = Instance.new("Frame", parent)
    Box.Size = UDim2.new(1, 0, 0, 45)
    Box.BackgroundColor3 = Config.Tema.Botao
    Box.BackgroundTransparency = 0
    Box.BorderSizePixel = 0
    
    Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 6)

    local Label = Instance.new("TextLabel", Box)
    Label.Size = UDim2.new(0.4, 0, 1, 0)
    Label.Position = UDim2.fromOffset(8, 0)
    Label.Text = texto
    Label.BackgroundTransparency = 1
    Label.TextColor3 = Config.Tema.Texto
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 9
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.TextWrapped = true

local Btn = Instance.new("TextButton", Box)
    Btn.Size = UDim2.new(0.55, 0, 0, 32)
    Btn.Position = UDim2.new(0.43, 0, 0.5, -16)
    Btn.Text = settingKey and _G.Settings[settingKey] or options[1] or "..."
    Btn.BackgroundColor3 = Config.Tema.Secundario
    Btn.BackgroundTransparency = 0.2
    Btn.TextColor3 = Config.Tema.Texto
    Btn.Font = Enum.Font.Gotham
    Btn.TextSize = 8
    Btn.BorderSizePixel = 0
    Btn.TextTruncate = Enum.TextTruncate.AtEnd
    Btn.ZIndex = 1006  -- ADICIONADO
    
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 5)
    
local DropScroll = Instance.new("ScrollingFrame", Gui)
    DropScroll.Size = UDim2.new(0, 180, 0, 0)
    DropScroll.Position = UDim2.new(0.5, 0, 0.5, 0)
    DropScroll.BackgroundColor3 = Config.Tema.Secundario
    DropScroll.BorderSizePixel = 0
    DropScroll.Visible = false
    DropScroll.ZIndex = 10000  -- J√Å EST√Å ALTO
    DropScroll.ScrollBarThickness = 3
    DropScroll.CanvasSize = UDim2.fromOffset(0, #options * 35)
    
    Instance.new("UICorner", DropScroll).CornerRadius = UDim.new(0, 5)
    
    local DropLayout = Instance.new("UIListLayout", DropScroll)
    DropLayout.Padding = UDim.new(0, 2)
    
    local isOpen = false
    
    Btn.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        DropScroll.Visible = isOpen
        
        if isOpen then
            local btnPos = Btn.AbsolutePosition
            DropScroll.Position = UDim2.fromOffset(btnPos.X, btnPos.Y + 37)
            DropScroll.Size = UDim2.new(0, 180, 0, math.min(#options * 35, 220))
        end
    end)
    
for _, option in pairs(options) do
        local OptBtn = Instance.new("TextButton", DropScroll)
        OptBtn.Size = UDim2.new(1, 0, 0, 33)
        OptBtn.Text = option
        OptBtn.BackgroundColor3 = Config.Tema.Botao
        OptBtn.TextColor3 = Config.Tema.Texto
        OptBtn.Font = Enum.Font.Gotham
        OptBtn.TextSize = 8
        OptBtn.BorderSizePixel = 0
        OptBtn.TextTruncate = Enum.TextTruncate.AtEnd
        OptBtn.ZIndex = 10001  -- ADICIONADO
        
        OptBtn.MouseButton1Click:Connect(function()
            Btn.Text = option
            DropScroll.Visible = false
            isOpen = false
            Notify("‚úÖ " .. texto .. ": " .. option)
            if callback then
                task.spawn(function() callback(option) end)
            end
            SaveConfig()
        end)
    end
    
    return {Dropdown = DropScroll, Button = Btn}
end

local function Button(parent, texto, callback)
    local Btn = Instance.new("TextButton", parent)
    Btn.Size = UDim2.new(1, 0, 0, 45)
    Btn.Text = texto
    Btn.BackgroundColor3 = Config.Tema.Ativo
    Btn.BackgroundTransparency = 0
    Btn.TextColor3 = Config.Tema.Texto
    Btn.Font = Enum.Font.GothamBold
    Btn.TextSize = 11
    Btn.BorderSizePixel = 0
    Btn.ZIndex = 1004  -- ADICIONADO
    
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 6)
    
    Btn.MouseButton1Click:Connect(function()
        if callback then
            task.spawn(function() callback() end)
        end
    end)
end

local function Section(parent, texto)
    local Box = Instance.new("Frame", parent)
    Box.Size = UDim2.new(1, 0, 0, 32)
    Box.BackgroundColor3 = Config.Tema.AzulClaro
    Box.BackgroundTransparency = 0
    Box.BorderSizePixel = 0
    
    Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 6)

    local Label = Instance.new("TextLabel", Box)
    Label.Size = UDim2.new(1, 0, 1, 0)
    Label.Text = "‚öôÔ∏è " .. texto
    Label.BackgroundTransparency = 1
    Label.TextColor3 = Color3.new(1, 1, 1)
    Label.Font = Enum.Font.GothamBold
    Label.TextSize = 11
    Label.TextXAlignment = Enum.TextXAlignment.Center
end

local function InfoBox(parent, title, value, color)
    local Box = Instance.new("Frame", parent)
    Box.Size = UDim2.new(1, 0, 0, 55)
    Box.BackgroundColor3 = Config.Tema.Botao
Box.BackgroundTransparency = 0
Box.BorderSizePixel = 0
    
    Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 8)
    
    local Title = Instance.new("TextLabel", Box)
    Title.Size = UDim2.new(1, -15, 0.4, 0)
    Title.Position = UDim2.fromOffset(8, 4)
    Title.Text = title
    Title.BackgroundTransparency = 1
    Title.TextColor3 = Color3.fromRGB(150, 150, 150)
    Title.Font = Enum.Font.Gotham
    Title.TextSize = 9
    Title.TextXAlignment = Enum.TextXAlignment.Left
    
    local Value = Instance.new("TextLabel", Box)
    Value.Size = UDim2.new(1, -15, 0.5, 0)
    Value.Position = UDim2.new(0, 8, 0.5, 0)
    Value.Text = value
    Value.BackgroundTransparency = 1
    Value.TextColor3 = color or Config.Tema.Texto
    Value.Font = Enum.Font.GothamBold
    Value.TextSize = 14
    Value.TextXAlignment = Enum.TextXAlignment.Left
    
    return {Box = Box, ValueLabel = Value}
end

local function StatusIndicator(parent, title, isActive, requiresSea3)
    local Box = Instance.new("Frame", parent)
    Box.Size = UDim2.new(0.48, 0, 0, 40)
    Box.BackgroundColor3 = Config.Tema.Botao
    Box.BackgroundTransparency = 0
    Box.BorderSizePixel = 0
    
    Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 6)
    
    local Indicator = Instance.new("Frame", Box)
    Indicator.Size = UDim2.fromOffset(10, 10)
    Indicator.Position = UDim2.fromOffset(8, 15)
    Indicator.BackgroundColor3 = isActive and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    Indicator.BorderSizePixel = 0
    
    Instance.new("UICorner", Indicator).CornerRadius = UDim.new(1, 0)
    
    local Label = Instance.new("TextLabel", Box)
    Label.Size = UDim2.new(1, -25, 1, 0)
    Label.Position = UDim2.fromOffset(23, 0)
    Label.Text = title
    Label.BackgroundTransparency = 1
    Label.TextColor3 = Config.Tema.Texto
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 9
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.TextWrapped = true
    
    if requiresSea3 and Sea ~= 3 then
        Label.Text = title .. "\n‚ö†Ô∏è SEA 3 APENAS"
        Label.TextColor3 = Color3.fromRGB(255, 150, 0)
        Indicator.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    end
    
    return {Box = Box, Indicator = Indicator, Label = Label}
end

-- =========================
-- CRIANDO TODAS AS ABAS
-- =========================
-- ABAS REORGANIZADAS
local HomeTab = CriarAba("üè† Home")
local SelectedTab = CriarAba("‚úì Ativos")
local FarmTab = CriarAba("üåæ Farm")  -- Farm + Boss juntos
local FruitTab = CriarAba("üçé Frutas")
local MissionTab = CriarAba("‚öîÔ∏è Miss√µes")  -- CDK + Estilos juntos
local RaceTab = CriarAba("üß¨ Ra√ßas")
local RaidTab = CriarAba("üèÜ Raids")
local TeleportTab = CriarAba("üó∫Ô∏è TP")
local SeaEventTab = CriarAba("üåä Eventos")
local ESPTab = CriarAba("üëÅÔ∏è ESP")
local PVPTab = CriarAba("‚öîÔ∏è PVP")
local MiscTab = CriarAba("üì¶ Misc")
local ConfigTab = CriarAba("‚öôÔ∏è Config")  -- Config por √∫ltimo

SelectedFrame = SelectedTab

-- Ativar primeira aba e garantir visibilidade
for _, v in pairs(Tabs) do
    v.Frame.Visible = false
    v.Btn.Visible = true
    v.Btn.ZIndex = 1002
    Tween(v.Btn, 0.2, {BackgroundColor3 = Config.Tema.Botao})
end

Tabs["üè† Home"].Frame.Visible = true
Tween(Tabs["üè† Home"].Btn, 0.2, {BackgroundColor3 = Config.Tema.Ativo})

-- For√ßar visibilidade de todos os elementos
Search.Visible = true
Search.ZIndex = 1002
TabBar.Visible = true
TabBar.ZIndex = 1002
Content.Visible = true
Content.ZIndex = 1002

-- Hover nas abas
for nome, tab in pairs(Tabs) do
    tab.Btn.MouseEnter:Connect(function()
        if not tab.Frame.Visible then
            Tween(tab.Btn, 0.15, {BackgroundColor3 = Color3.fromRGB(50, 75, 120)})
        end
    end)
    
    tab.Btn.MouseLeave:Connect(function()
        if not tab.Frame.Visible then
            Tween(tab.Btn, 0.15, {BackgroundColor3 = Config.Tema.Botao})
        end
    end)
end

print("‚úÖ Elementos da GUI configurados!")

-- =========================
-- ABA HOME
-- =========================
Button(HomeTab, "üéÆ Entrar no Discord", function()
    local url = "https://discord.gg/RnZ6XHHFj7"
    pcall(function()
        setclipboard(url)
    end)
    Notify("‚úÖ Link copiado: " .. url)
end)

Section(HomeTab, "Perfil do Jogador")

local PlayerNameBox = InfoBox(HomeTab, "üë§ Nome", LocalPlayer.Name, Color3.fromRGB(100, 200, 255))
local LevelBox = InfoBox(HomeTab, "‚≠ê Level", tostring(LocalPlayer.Data.Level.Value), Color3.fromRGB(255, 215, 0))
local MoneyBox = InfoBox(HomeTab, "üí∞ Beli", "...", Color3.fromRGB(255, 215, 0))
local FragBox = InfoBox(HomeTab, "üíé Fragmentos", "...", Color3.fromRGB(100, 200, 255))

-- Atualizar info do player
task.spawn(function()
    while task.wait(5) do
        pcall(function()
            LevelBox.ValueLabel.Text = tostring(LocalPlayer.Data.Level.Value)
            MoneyBox.ValueLabel.Text = "$" .. FormatNumber(LocalPlayer.Data.Beli.Value)
            FragBox.ValueLabel.Text = FormatNumber(LocalPlayer.Data.Fragments.Value)
        end)
    end
end)

Section(HomeTab, "Status de Eventos")

local StatusGrid = Instance.new("Frame", HomeTab)
StatusGrid.Size = UDim2.new(1, 0, 0, 90)
StatusGrid.BackgroundTransparency = 1

local GridLayout = Instance.new("UIGridLayout", StatusGrid)
GridLayout.CellSize = UDim2.new(0.48, 0, 0, 40)
GridLayout.CellPadding = UDim2.new(0.04, 0, 0, 8)

local LeviathanStatus = StatusIndicator(StatusGrid, "üêâ Leviathan", false, true)
local MirageStatus = StatusIndicator(StatusGrid, "üèùÔ∏è Miragem", false, true)
local VolcanoStatus = StatusIndicator(StatusGrid, "üåã Vulc√£o", false, true)
local FullMoonStatus = StatusIndicator(StatusGrid, "üåï Lua Cheia", false, false)

-- Atualizar status dos eventos
task.spawn(function()
    while task.wait(30) do
        if Sea == 3 then
            pcall(function()
                -- Leviathan
                local leviathanSpawned = workspace:FindFirstChild("Leviathan") ~= nil
                LeviathanStatus.Indicator.BackgroundColor3 = leviathanSpawned and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
                
                -- Mirage
                local mirageSpawned = false
                for _, v in pairs(workspace:GetChildren()) do
                    if v.Name == "MysticIsland" then
                        mirageSpawned = true
                        break
                    end
                end
                MirageStatus.Indicator.BackgroundColor3 = mirageSpawned and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
                
                -- Vulc√£o
                local volcanoSpawned = false
                for _, v in pairs(workspace:GetChildren()) do
                    if v.Name:find("Volcano") then
                        volcanoSpawned = true
                        break
                    end
                end
                VolcanoStatus.Indicator.BackgroundColor3 = volcanoSpawned and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
                
                -- Lua Cheia
                local isFullMoon = Lighting.ClockTime >= 18 or Lighting.ClockTime <= 6
                FullMoonStatus.Indicator.BackgroundColor3 = isFullMoon and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
            end)
        end
    end
end)

-- =========================
-- ABA ATIVOS
-- =========================
local NoSelectedLabel = Instance.new("TextLabel", SelectedTab)
NoSelectedLabel.Size = UDim2.new(1, 0, 1, 0)
NoSelectedLabel.Text = "Nenhuma op√ß√£o ativa.\n\nAtive funcionalidades nas outras abas\npara v√™-las aqui!"
NoSelectedLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
NoSelectedLabel.BackgroundTransparency = 1
NoSelectedLabel.Font = Enum.Font.Gotham
NoSelectedLabel.TextSize = 11
NoSelectedLabel.TextWrapped = true

-- =========================
-- ABA FARM
-- =========================
Section(FarmTab, "Configura√ß√£o de Farm")

Dropdown(FarmTab, "Tipo de Arma", {"Nenhum", "Estilo de Luta", "Espada", "Arma", "Fruta"}, function(v)
    _G.Settings.WeaponType = v
end, "WeaponType")

Dropdown(FarmTab, "Dist√¢ncia", {"20", "30", "40", "50"}, function(v)
    _G.Settings.FarmDistance = tonumber(v)
end, "FarmDistance")

Toggle(FarmTab, "Bring Mobs", function(v)
    _G.Settings.BringMobs = v
end, "BringMobs")

Section(FarmTab, "Auto Farm")

Toggle(FarmTab, "Auto Farm Level", function(v)
    if v and _G.Settings.WeaponType == "Nenhum" then
        Notify("‚ö†Ô∏è Selecione uma arma primeiro!")
        return
    end
    _G.Settings.AutoFarmLevel = v
end, "AutoFarmLevel")

Toggle(FarmTab, "Auto Chest", function(v)
    _G.Settings.AutoChest = v
end, "AutoChest")

Toggle(FarmTab, "Fast Attack", function(v)
    _G.Settings.FastAttack = v
end, "FastAttack")

Toggle(FarmTab, "Auto Buso Haki", function(v)
    _G.Settings.AutoHaki = v
end, "AutoHaki")

Section(FarmTab, "Mastery Farm")

Toggle(FarmTab, "Farm Mastery Fruta", function(v)
    _G.Settings.FarmFruitMastery = v
end, "FarmFruitMastery")

Toggle(FarmTab, "Farm Mastery Arma", function(v)
    _G.Settings.FarmWeaponMastery = v
end, "FarmWeaponMastery")

-- =========================
-- ABA FARM (CONTINUA√á√ÉO - BOSS)
-- =========================
Section(FarmTab, "Auto Farm Boss")

Toggle(FarmTab, "Auto Farm Boss", function(v)
    _G.Settings.AutoFarmBoss = v
end, "AutoFarmBoss")

local function GetSpawnedBosses()
    local spawned = {"All"}
    pcall(function()
        for _, boss in pairs(workspace.Enemies:GetChildren()) do
            if boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                for _, bossName in pairs(BossList) do
                    if boss.Name == bossName and not table.find(spawned, boss.Name) then
                        table.insert(spawned, boss.Name)
                        break
                    end
                end
            end
        end
    end)
    return spawned
end

local bossDropdown = Dropdown(FarmTab, "Boss Selecionado", GetSpawnedBosses(), function(v)
    _G.Settings.SelectedBoss = v
end, "SelectedBoss")

Section(FarmTab, "Bosses Espec√≠ficos")

if Sea == 2 then
    Toggle(FarmTab, "Auto Katakuri (500 Donuts)", function(v)
        _G.Settings.AutoKatakuri = v
    end, "AutoKatakuri")
end

if Sea == 3 then
    Toggle(FarmTab, "Auto Dough King", function(v)
        _G.Settings.AutoDoughKing = v
    end, "AutoDoughKing")
end

-- =========================
-- ABA FRUTAS
-- =========================
Section(FruitTab, "Auto Frutas")

Toggle(FruitTab, "Auto Random Fruit", function(v)
    _G.Settings.AutoRandomFruit = v
end, "AutoRandomFruit")

Toggle(FruitTab, "Fruit Sniper", function(v)
    _G.Settings.AutoFruitSniper = v
end, "AutoFruitSniper")

Toggle(FruitTab, "Auto Guardar Fruta", function(v)
    _G.Settings.AutoStoreFruit = v
end, "AutoStoreFruit")

Section(FruitTab, "Comprar Frutas")

Toggle(FruitTab, "Auto Comprar Fruta", function(v)
    _G.Settings.AutoBuyFruit = v
end, "AutoBuyFruit")

Dropdown(FruitTab, "Fruta Selecionada", FruitList, function(v)
    _G.Settings.SelectedFruit = v
end, "SelectedFruit")

Section(FruitTab, "Loja de Frutas")

Button(FruitTab, "üìä Ver Loja Normal", function()
    task.spawn(function()
        local remote = GetRemote()
        if not remote then 
            Notify("‚ùå Remote n√£o encontrado!")
            return 
        end
        print("=== LOJA NORMAL ===")
        local success, result = pcall(function()
            return remote:InvokeServer("GetFruits")
        end)
        if success and result and type(result) == "table" then
            for _, fruit in pairs(result) do
                if type(fruit) == "table" and fruit.Name and fruit.Price then
                    print(string.format("üçé %s - $%s", fruit.Name, FormatNumber(fruit.Price)))
                end
            end
            Notify("‚úÖ Confira o console (F9)")
        else
            Notify("‚ö†Ô∏è Erro ao consultar loja")
        end
    end)
end)

Button(FruitTab, "üåÄ Ver Loja Miragem", function()
    task.spawn(function()
        local remote = GetRemote()
        if not remote then
            Notify("‚ùå Remote n√£o encontrado!")
            return
        end
        print("=== LOJA MIRAGEM ===")
        local success, result = pcall(function()
            return remote:InvokeServer("GetFruits", true)
        end)
        if success and type(result) == "table" then
            for _, fruit in pairs(result) do
                if type(fruit) == "table" and fruit.Name and fruit.Price then
                    print(string.format("üåü %s - %s fragmentos", fruit.Name, FormatNumber(fruit.Price)))
                end
            end
            Notify("‚úÖ Confira o console (F9)")
        else
            Notify("‚úÖ Loja verificada!")
        end
    end)
end)

-- =========================
-- ABA MISS√ïES (CDK + TTK + ESTILOS)
-- =========================
Section(MissionTab, "Armas Lend√°rias")

Toggle(MissionTab, "Auto Get CDK", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è CDK s√≥ est√° dispon√≠vel no Sea 3!")
        return
    end
    _G.Settings.AutoGetCDK = v
end, "AutoGetCDK")

Toggle(MissionTab, "Auto Get Soul Guitar", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Soul Guitar s√≥ est√° dispon√≠vel no Sea 3!")
        return
    end
    _G.Settings.AutoGetSoulGuitar = v
end, "AutoGetSoulGuitar")

Toggle(MissionTab, "Auto Get TTK (Triple Katana)", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è TTK s√≥ est√° dispon√≠vel no Sea 3!")
        return
    end
    _G.Settings.AutoGetTTK = v
end, "AutoGetTTK")

Section(MissionTab, "Estilos de Luta V1")

Toggle(MissionTab, "Auto Get Dark Step", function(v)
    _G.Settings.AutoGetDarkStep = v
end, "AutoGetDarkStep")

Toggle(MissionTab, "Auto Get Electric", function(v)
    _G.Settings.AutoGetElectric = v
end, "AutoGetElectric")

Toggle(MissionTab, "Auto Get Water Kung Fu", function(v)
    _G.Settings.AutoGetWaterKungFu = v
end, "AutoGetWaterKungFu")

Toggle(MissionTab, "Auto Get Dragon Breath", function(v)
    _G.Settings.AutoGetDragonBreath = v
end, "AutoGetDragonBreath")

Toggle(MissionTab, "Auto Get Superhuman", function(v)
    _G.Settings.AutoGetSuperhuman = v
end, "AutoGetSuperhuman")

Section(MissionTab, "Estilos de Luta V2 (Sea 3)")

Toggle(MissionTab, "Auto Get Death Step", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Death Step s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoGetDeathStep = v
end, "AutoGetDeathStep")

Toggle(MissionTab, "Auto Get Sharkman Karate", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Sharkman Karate s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoGetSharkmanKarate = v
end, "AutoGetSharkmanKarate")

Toggle(MissionTab, "Auto Get Dragon Talon", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Dragon Talon s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoGetDragonTalon = v
end, "AutoGetDragonTalon")

Toggle(MissionTab, "Auto Get Electric Claw", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Electric Claw s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoGetElectricClaw = v
end, "AutoGetElectricClaw")

Section(MissionTab, "Estilos de Luta V3 (Sea 3)")

Toggle(MissionTab, "Auto Get Godhuman", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Godhuman s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoGetGodhuman = v
end, "AutoGetGodhuman")

Toggle(MissionTab, "Auto Get Sanguine Art", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Sanguine Art s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoGetSanguineArt = v
end, "AutoGetSanguineArt")

-- =========================
-- ABA RA√áAS
-- =========================
Section(RaceTab, "Evoluir Ra√ßa")

if Sea == 2 then
    Toggle(RaceTab, "Auto Get Ra√ßa V2", function(v)
        _G.Settings.AutoGetRaceV2 = v
    end, "AutoGetRaceV2")
end

if Sea == 3 then
    Toggle(RaceTab, "Auto Get Ra√ßa V3", function(v)
        _G.Settings.AutoGetRaceV3 = v
    end, "AutoGetRaceV3")
    
    Toggle(RaceTab, "Auto Get Ra√ßa V4", function(v)
        _G.Settings.AutoGetRaceV4 = v
    end, "AutoGetRaceV4")
end

Section(RaceTab, "Informa√ß√µes")

local RaceInfoLabel = Instance.new("TextLabel", RaceTab)
RaceInfoLabel.Size = UDim2.new(1, 0, 0, 200)
RaceInfoLabel.Text = "üß¨ SUA RA√áA: " .. (LocalPlayer.Data.Race.Value or "N/A") .. "\n\nüìå V2 (Sea 2)\nRequer: Level 1000+, $3M\n\nüìå V3 (Sea 3)\nRequer: Level 1500+, V2, Quest\n\nüìå V4 (Sea 3)\nRequer: Level 2000+, V3\nTemple of Time Trial"
RaceInfoLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
RaceInfoLabel.BackgroundColor3 = Config.Tema.Botao
RaceInfoLabel.BackgroundTransparency = 0.5
RaceInfoLabel.Font = Enum.Font.Gotham
RaceInfoLabel.TextSize = 9
RaceInfoLabel.TextWrapped = true
RaceInfoLabel.TextYAlignment = Enum.TextYAlignment.Top

Instance.new("UICorner", RaceInfoLabel).CornerRadius = UDim.new(0, 6)

-- =========================
-- ABA RAIDS
-- =========================
Section(RaidTab, "Auto Raid")

Toggle(RaidTab, "Auto Start Raid", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Raids s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoRaid = v
end, "AutoRaid")

Dropdown(RaidTab, "Chip de Raid", RaidChips, function(v)
    _G.Settings.SelectedRaidChip = v
end, "SelectedRaidChip")

Section(RaidTab, "Dungeon")

Toggle(RaidTab, "Auto Complete Dungeon", function(v)
    if Sea ~= 3 then
        Notify("‚ö†Ô∏è Dungeon s√≥ no Sea 3!")
        return
    end
    _G.Settings.AutoDungeon = v
end, "AutoDungeon")

Section(RaidTab, "Awakening")

Button(RaidTab, "üî• Despertar Fruta", function()
    local remote = GetRemote()
    if remote then
        remote:InvokeServer("Awakening", "Check")
        Notify("‚úÖ Confira suas habilidades!")
    end
end)

-- =========================
-- ABA TELEPORT
-- =========================
Section(TeleportTab, "Mudar de Sea")

local SeaFrame = Instance.new("Frame", TeleportTab)
SeaFrame.Size = UDim2.new(1, 0, 0, 50)
SeaFrame.BackgroundTransparency = 1

local SeaLayout = Instance.new("UIListLayout", SeaFrame)
SeaLayout.FillDirection = Enum.FillDirection.Horizontal
SeaLayout.Padding = UDim.new(0, 4)
SeaLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

for i = 1, 3 do
    local SeaBtn = Instance.new("TextButton", SeaFrame)
    SeaBtn.Size = UDim2.new(0.3, 0, 0, 45)
    SeaBtn.Text = "SEA " .. i
    SeaBtn.BackgroundColor3 = Sea == i and Config.Tema.Ativo or Config.Tema.Botao
    SeaBtn.BackgroundTransparency = 0
    SeaBtn.TextColor3 = Color3.new(1, 1, 1)
    SeaBtn.Font = Enum.Font.GothamBold
    SeaBtn.TextSize = 11
    SeaBtn.BorderSizePixel = 0
    Instance.new("UICorner", SeaBtn).CornerRadius = UDim.new(0, 6)
    SeaBtn.MouseButton1Click:Connect(function()
        TeleportToSea(i)
    end)
end

Section(TeleportTab, "Teleportar para Ilha")

Dropdown(TeleportTab, "Ilha", CurrentIslands, function(v)
    _G.Settings.SelectedIsland = v
end, "SelectedIsland")

Button(TeleportTab, "üöÄ Teleportar", function()
    if _G.Settings.SelectedIsland and IslandPositions[_G.Settings.SelectedIsland] then
        TP(IslandPositions[_G.Settings.SelectedIsland])
        Notify("‚úÖ TP: " .. _G.Settings.SelectedIsland)
    else
        Notify("‚ö†Ô∏è Selecione uma ilha!")
    end
end)

Section(TeleportTab, "Miss√µes de Sea")

if Sea == 1 then
    Toggle(TeleportTab, "Auto Go to Sea 2", function(v)
        _G.Settings.AutoGetToSea2 = v
    end, "AutoGetToSea2")
elseif Sea == 2 then
    Toggle(TeleportTab, "Auto Go to Sea 3", function(v)
        _G.Settings.AutoGetToSea3 = v
    end, "AutoGetToSea3")
end

-- =========================
-- ABA SEA EVENTS
-- =========================
Section(SeaEventTab, "Configura√ß√£o de Barco")

-- Lista de barcos gr√°tis
local FreeBoats = {
    "Usar o que eu estou",
    "Dinghy",
    "Sloop", 
    "Brigantine"
}

-- Lista de eventos do mar
local SeaEvents = {
    "Sea Beast",
    "Tubar√£o",
    "Piranha", 
    "Terror Shark",
    "Mares Estrodosos",
    "Naufr√°gio",
    "Barcos Piratas"
}

Dropdown(SeaEventTab, "Selecionar Barco", FreeBoats, function(v)
    _G.Settings.SelectedBoat = v
    SaveConfig()
end, "SelectedBoat")

Dropdown(SeaEventTab, "Tipo de Evento", SeaEvents, function(v)
    _G.Settings.SelectedSeaEvent = v
    SaveConfig()
end, "SelectedSeaEvent")

Button(SeaEventTab, "üöÄ Come√ßar Sea Event", function()
    -- Verificar se selecionou barco
    if not _G.Settings.SelectedBoat or _G.Settings.SelectedBoat == "" then
        Notify("‚ö†Ô∏è Selecione um barco primeiro!")
        return
    end
    
    -- Verificar se selecionou evento
    if not _G.Settings.SelectedSeaEvent or _G.Settings.SelectedSeaEvent == "" then
        Notify("‚ö†Ô∏è Selecione um tipo de evento!")
        return
    end
    
    if SeaEventRunning then
        Notify("‚ö†Ô∏è Sea Event j√° est√° rodando!")
        return
    end
    
    SeaEventRunning = true
    _G.Settings.SeaEventActive = true
    Notify("‚úÖ Iniciando Sea Event: " .. _G.Settings.SelectedSeaEvent)
    
    task.spawn(function()
        pcall(function()
            -- Se n√£o for "Usar o que eu estou", comprar barco
            if _G.Settings.SelectedBoat ~= "Usar o que eu estou" then
                -- Ir para Tiki Outpost
                Notify("üìç Indo para Tiki Outpost...")
                TP(CFrame.new(-16105, 9, 440))
                task.wait(3)
                
                -- Comprar barco selecionado
                local remote = GetRemote()
                if remote then
                    Notify("üõí Comprando barco: " .. _G.Settings.SelectedBoat)
                    remote:InvokeServer("BuyBoat", _G.Settings.SelectedBoat)
                    task.wait(2)
                    
                    -- Tentar sentar no barco
                    for _, boat in pairs(workspace.Boats:GetChildren()) do
                        if boat:FindFirstChild("VehicleSeat") and boat.VehicleSeat.Occupant == nil then
                            LocalPlayer.Character.HumanoidRootPart.CFrame = boat.VehicleSeat.CFrame
                            task.wait(0.5)
                            break
                        end
                    end
                end
            else
                -- Verificar se est√° sentado em um barco
                local character = LocalPlayer.Character
                if character and character:FindFirstChild("Humanoid") then
                    local seat = character.Humanoid.SeatPart
                    if not seat or seat.Name ~= "VehicleSeat" then
                        Notify("‚ö†Ô∏è Voc√™ n√£o est√° em um barco! Sente-se primeiro.")
                        SeaEventRunning = false
                        _G.Settings.SeaEventActive = false
                        return
                    end
                    Notify("‚úÖ Usando barco atual")
                end
            end
            
            -- Iniciar farm do evento selecionado
            Notify("‚öîÔ∏è Farmando: " .. _G.Settings.SelectedSeaEvent)
        end)
    end)
end)

Button(SeaEventTab, "‚õî Parar Sea Event", function()
    SeaEventRunning = false
    _G.Settings.SeaEventActive = false
    Notify("‚ùå Sea Event parado!")
end)

Section(SeaEventTab, "Barco Autom√°tico")

Dropdown(SeaEventTab, "Profundidade do Mar", {"Mar 1", "Mar 2", "Mar 3", "Mar 4", "Mar 5", "Mar 6"}, function(v)
    _G.Settings.SeaDepth = v
    SaveConfig()
end, "SeaDepth")

Toggle(SeaEventTab, "Modo Circular (Evitar Sea Beast)", function(v)
    _G.Settings.CircularMode = v
end, "CircularMode")

Section(SeaEventTab, "Leviathan (Em Breve)")

local LeviathanInfo = Instance.new("TextLabel", SeaEventTab)
LeviathanInfo.Size = UDim2.new(1, 0, 0, 60)
LeviathanInfo.Text = "üêâ Leviathan\n\nRecurso em desenvolvimento..."
LeviathanInfo.TextColor3 = Color3.fromRGB(200, 200, 200)
LeviathanInfo.BackgroundColor3 = Config.Tema.Botao
LeviathanInfo.BackgroundTransparency = 0
LeviathanInfo.Font = Enum.Font.Gotham
LeviathanInfo.TextSize = 9
LeviathanInfo.TextWrapped = true
LeviathanInfo.TextYAlignment = Enum.TextYAlignment.Top

Instance.new("UICorner", LeviathanInfo).CornerRadius = UDim.new(0, 6)

Section(SeaEventTab, "Vulc√£o (Em Breve)")

local VolcanoInfo = Instance.new("TextLabel", SeaEventTab)
VolcanoInfo.Size = UDim2.new(1, 0, 0, 60)
VolcanoInfo.Text = "üåã Vulc√£o\n\nRecurso em desenvolvimento..."
VolcanoInfo.TextColor3 = Color3.fromRGB(200, 200, 200)
VolcanoInfo.BackgroundColor3 = Config.Tema.Botao
VolcanoInfo.BackgroundTransparency = 0
VolcanoInfo.Font = Enum.Font.Gotham
VolcanoInfo.TextSize = 9
VolcanoInfo.TextWrapped = true
VolcanoInfo.TextYAlignment = Enum.TextYAlignment.Top

Instance.new("UICorner", VolcanoInfo).CornerRadius = UDim.new(0, 6)

Section(SeaEventTab, "Kitsune Island (Em Breve)")

local KitsuneInfo = Instance.new("TextLabel", SeaEventTab)
KitsuneInfo.Size = UDim2.new(1, 0, 0, 60)
KitsuneInfo.Text = "ü¶ä Kitsune Island\n\nRecurso em desenvolvimento..."
KitsuneInfo.TextColor3 = Color3.fromRGB(200, 200, 200)
KitsuneInfo.BackgroundColor3 = Config.Tema.Botao
KitsuneInfo.BackgroundTransparency = 0
KitsuneInfo.Font = Enum.Font.Gotham
KitsuneInfo.TextSize = 9
KitsuneInfo.TextWrapped = true
KitsuneInfo.TextYAlignment = Enum.TextYAlignment.Top

Instance.new("UICorner", KitsuneInfo).CornerRadius = UDim.new(0, 6)
-- =========================
-- ABA ESP
-- =========================
Section(ESPTab, "ESP Geral")

Toggle(ESPTab, "ESP Frutas", function(v)
    _G.Settings.ESPFruit = v
end, "ESPFruit")

Toggle(ESPTab, "ESP Ilhas", function(v)
    _G.Settings.ESPIsland = v
end, "ESPIsland")

Toggle(ESPTab, "ESP Players", function(v)
    _G.Settings.ESPPlayer = v
end, "ESPPlayer")

Toggle(ESPTab, "ESP Chests", function(v)
    _G.Settings.ESPChest = v
end, "ESPChest")

Toggle(ESPTab, "ESP Flowers", function(v)
    _G.Settings.ESPFlower = v
end, "ESPFlower")

Toggle(ESPTab, "ESP NPCs", function(v)
    _G.Settings.ESPNPC = v
end, "ESPNPC")

Section(ESPTab, "ESP Especial")

Toggle(ESPTab, "ESP Mirage Island", function(v)
    _G.Settings.ESPMirage = v
end, "ESPMirage")

Toggle(ESPTab, "ESP Gear", function(v)
    _G.Settings.ESPGear = v
end, "ESPGear")

Toggle(ESPTab, "ESP Elite Hunter", function(v)
    _G.Settings.ESPEliteHunter = v
end, "ESPEliteHunter")

-- =========================
-- ABA CONFIG
-- =========================
Section(ConfigTab, "Configura√ß√µes de Personagem")

Toggle(ConfigTab, "Andar na √Ågua", function(v)
    _G.Settings.WalkOnWater = v
end, "WalkOnWater")

Toggle(ConfigTab, "Remover Neblina", function(v)
    _G.Settings.RemoveFog = v
end, "RemoveFog")

Toggle(ConfigTab, "Anti AFK", function(v)
    _G.Settings.AntiAFK = v
end, "AntiAFK")

Toggle(ConfigTab, "Auto Rejoin on Kick", function(v)
    _G.Settings.AutoRejoin = v
end, "AutoRejoin")

Toggle(ConfigTab, "No Clip", function(v)
    _G.Settings.NoClip = v
end, "NoClip")

Toggle(ConfigTab, "Infinite Energy", function(v)
    _G.Settings.InfiniteEnergy = v
end, "InfiniteEnergy")

Section(ConfigTab, "Visual")

Toggle(ConfigTab, "Remover Dano Visual", function(v)
    _G.Settings.RemoveDamage = v
end, "RemoveDamage")

Toggle(ConfigTab, "White Screen", function(v)
    _G.Settings.WhiteScreen = v
    if v then
        Lighting.Ambient = Color3.new(1, 1, 1)
        Lighting.Brightness = 2
        Lighting.ColorShift_Bottom = Color3.new(1, 1, 1)
        Lighting.ColorShift_Top = Color3.new(1, 1, 1)
        Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
    else
        Lighting.Ambient = Color3.new(0, 0, 0)
        Lighting.Brightness = 1
        Lighting.ColorShift_Bottom = Color3.new(0, 0, 0)
        Lighting.ColorShift_Top = Color3.new(0, 0, 0)
        Lighting.OutdoorAmbient = Color3.new(0.5, 0.5, 0.5)
    end
end, "WhiteScreen")

Section(ConfigTab, "Performance")

Button(ConfigTab, "üîß Boost FPS (Low Graphics)", function()
    -- Reduzir qualidade gr√°fica para melhorar FPS
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Part") or v:IsA("MeshPart") then
            v.Material = Enum.Material.SmoothPlastic
            v.Reflectance = 0
        elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
            v.Enabled = false
        elseif v:IsA("Fire") or v:IsA("Smoke") then
            v.Enabled = false
        end
    end
    Notify("‚úÖ FPS Boost ativado!")
end)

Button(ConfigTab, "üíæ Salvar Configura√ß√£o", function()
    SaveConfig()
    Notify("‚úÖ Configura√ß√£o salva!")
end)

Button(ConfigTab, "üîÑ Resetar Configura√ß√£o", function()
    _G.Settings = {
        AutoFarmLevel = false,
        AutoFarmBoss = false,
        SelectedBoss = "All",
        AutoChest = false,
        FastAttack = false,
        AutoHaki = false,
        WeaponType = "Nenhum",
        FarmDistance = 30,
        BringMobs = true,
    }
    SaveConfig()
    Notify("‚úÖ Configura√ß√£o resetada!")
end)

-- =========================
-- ABA PVP
-- =========================
Section(PVPTab, "Auto PVP")

Toggle(PVPTab, "Auto PVP", function(v)
    _G.Settings.AutoPVP = v
end, "AutoPVP")

local playerList = {}
for _, player in pairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        table.insert(playerList, player.Name)
    end
end

Dropdown(PVPTab, "Jogador Alvo", playerList, function(v)
    _G.Settings.SelectedPlayer = v
end, "SelectedPlayer")

Toggle(PVPTab, "Modo Seguro (30% HP)", function(v)
    _G.Settings.SafeMode = v
end, "SafeMode")

Section(PVPTab, "Aimbot")

Toggle(PVPTab, "Aimbot", function(v)
    _G.Settings.Aimbot = v
end, "Aimbot")

Toggle(PVPTab, "Aim Through Walls", function(v)
    _G.Settings.AimThroughWalls = v
end, "AimThroughWalls")

Section(PVPTab, "Bounty Hunting")

Toggle(PVPTab, "Auto Farm Bounty", function(v)
    _G.Settings.AutoFarmBounty = v
end, "AutoFarmBounty")

Button(PVPTab, "üìä Ver Minha Bounty", function()
    local bounty = LocalPlayer.leaderstats.Bounty.Value
    Notify("üí∞ Sua Bounty: $" .. FormatNumber(bounty))
end)

-- =========================
-- ABA MISC
-- =========================
Section(MiscTab, "Automa√ß√µes Extras")

Toggle(MiscTab, "Auto Buy Chips", function(v)
    _G.Settings.AutoBuyChips = v
end, "AutoBuyChips")

Toggle(MiscTab, "Auto Buy Legendary Sword", function(v)
    _G.Settings.AutoBuyLegendarySword = v
end, "AutoBuyLegendarySword")

Toggle(MiscTab, "Auto Observation Haki", function(v)
    _G.Settings.AutoObservation = v
end, "AutoObservation")

Toggle(MiscTab, "Auto Saber", function(v)
    _G.Settings.AutoSaber = v
end, "AutoSaber")

Toggle(MiscTab, "Auto Pole V1", function(v)
    _G.Settings.AutoPole = v
end, "AutoPole")

Section(MiscTab, "Redeem Codes")

local CodeBox = Instance.new("TextBox", MiscTab)
CodeBox.Size = UDim2.new(1, 0, 0, 40)
CodeBox.PlaceholderText = "Digite o c√≥digo aqui..."
CodeBox.Text = ""
CodeBox.BackgroundColor3 = Config.Tema.Botao
CodeBox.BackgroundTransparency = 0
CodeBox.TextColor3 = Config.Tema.Texto
CodeBox.BorderSizePixel = 0
CodeBox.Font = Enum.Font.Gotham
CodeBox.TextSize = 11

Instance.new("UICorner", CodeBox).CornerRadius = UDim.new(0, 6)

Button(MiscTab, "üéÅ Resgatar C√≥digo", function()
    if CodeBox.Text ~= "" then
        local remote = GetRemote()
        if remote then
            remote:InvokeServer("Redeem", CodeBox.Text)
            Notify("‚úÖ C√≥digo enviado: " .. CodeBox.Text)
            CodeBox.Text = ""
        end
    else
        Notify("‚ö†Ô∏è Digite um c√≥digo!")
    end
end)

Section(MiscTab, "C√≥digos Ativos")

local codesText = [[
üìã C√ìDIGOS V√ÅLIDOS:
- Sub2CaptainMaui
- kittgaming
- Sub2Fer999
- Enyu_is_Pro
- Magicbus
- JCWK
- Starcodeheo
- Bluxxy
- SUB2GAMERROBOT_EXP1
]]

local CodesLabel = Instance.new("TextLabel", MiscTab)
CodesLabel.Size = UDim2.new(1, 0, 0, 200)
CodesLabel.Text = codesText
CodesLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
CodesLabel.BackgroundColor3 = Config.Tema.Botao
CodesLabel.BackgroundTransparency = 0
CodesLabel.Font = Enum.Font.Gotham
CodesLabel.TextSize = 8
CodesLabel.TextWrapped = true
CodesLabel.TextYAlignment = Enum.TextYAlignment.Top
CodesLabel.TextXAlignment = Enum.TextXAlignment.Left

Instance.new("UICorner", CodesLabel).CornerRadius = UDim.new(0, 6)

Section(MiscTab, "Utilidades")

Button(MiscTab, "üîÑ Rejoin Server", function()
    game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
end)

Button(MiscTab, "üé≤ Join Low Player Server", function()
    local servers = {}
    local req = game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100")
    local body = HttpService:JSONDecode(req)
    
    if body and body.data then
        for _, v in pairs(body.data) do
            if v.playing < v.maxPlayers - 10 then
                table.insert(servers, v)
            end
        end
        
        if #servers > 0 then
            local server = servers[math.random(1, #servers)]
            game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, server.id, LocalPlayer)
        else
            Notify("‚ö†Ô∏è Nenhum servidor encontrado!")
        end
    end
end)

Button(MiscTab, "üìã Copy Discord Link", function()
    pcall(function()
        setclipboard("https://discord.gg/RnZ6XHHFj7")
    end)
    Notify("‚úÖ Link copiado!")
end)

-- =========================
-- AUTO REJOIN ON KICK
-- =========================
task.spawn(function()
    while task.wait(1) do
        if _G.Settings.AutoRejoin then
            local success, err = pcall(function()
                game:GetService("CoreGui").RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(child)
                    if child.Name == 'ErrorPrompt' then
                        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
                    end
                end)
            end)
        end
    end
end)

-- =========================
-- NO CLIP
-- =========================
task.spawn(function()
    while task.wait(0.1) do
        if _G.Settings.NoClip then
            pcall(function()
                for _, v in pairs(LocalPlayer.Character:GetDescendants()) do
                    if v:IsA("BasePart") then
                        v.CanCollide = false
                    end
                end
            end)
        end
    end
end)

-- =========================
-- INFINITE ENERGY
-- =========================
task.spawn(function()
    while task.wait(0.1) do
        if _G.Settings.InfiniteEnergy then
            pcall(function()
                LocalPlayer.Character.Energy.Value = LocalPlayer.Character.Energy.MaxValue
            end)
        end
    end
end)

-- =========================
-- AUTO TERRORSHARK
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoTerrorshark then
            pcall(function()
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v.Name == "Terrorshark" and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipWeapon()
                            v.HumanoidRootPart.Size = Vector3.new(60,60,60)
                            LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 50, 0)
                            _G.Settings.FastAttack = true
                        until not v.Parent or v.Humanoid.Health <= 0 or not _G.Settings.AutoTerrorshark
                        _G.Settings.FastAttack = false
                        Notify("‚úÖ Terrorshark derrotado!")
                    end
                end
            end)
        end
    end
end)

-- =========================
-- AUTO PIRANHA
-- =========================
task.spawn(function()
    while task.wait(5) do
        if _G.Settings.AutoPiranha then
            pcall(function()
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v.Name == "Piranha" and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipWeapon()
                            v.HumanoidRootPart.Size = Vector3.new(60,60,60)
                            LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                            _G.Settings.FastAttack = true
                        until not v.Parent or v.Humanoid.Health <= 0 or not _G.Settings.AutoPiranha
                        _G.Settings.FastAttack = false
                    end
                end
            end)
        end
    end
end)

-- =========================
-- SISTEMA DE SEA EVENT AUTOM√ÅTICO
-- =========================
task.spawn(function()
    while task.wait(1) do
        if _G.Settings.SeaEventActive and SeaEventRunning then
            pcall(function()
                local boat = nil
                
                -- Encontrar barco atual
                for _, v in pairs(workspace.Boats:GetChildren()) do
                    if v:FindFirstChild("VehicleSeat") then
                        local seat = v.VehicleSeat
                        if seat.Occupant and seat.Occupant.Parent == LocalPlayer.Character then
                            boat = v
                            break
                        end
                    end
                end
                
                if not boat then return end
                
                -- Modo circular
                if _G.Settings.CircularMode then
                    local SeaDepthPositions = {
                        ["Mar 1"] = -50, 
                        ["Mar 2"] = -100, 
                        ["Mar 3"] = -200, 
                        ["Mar 4"] = -400, 
                        ["Mar 5"] = -600, 
                        ["Mar 6"] = -800
                    }
                    
                    local depth = SeaDepthPositions[_G.Settings.SeaDepth] or -50
                    local radius = 300
                    local angle = (tick() * 0.5) % (math.pi * 2)
                    
                    local xOffset = math.cos(angle) * radius
                    local zOffset = math.sin(angle) * radius
                    local currentPos = boat.VehicleSeat.CFrame.Position
                    
                    boat.VehicleSeat.CFrame = CFrame.new(currentPos.X + xOffset, depth, currentPos.Z + zOffset)
                end
                
                -- Farmar evento selecionado
                local event = _G.Settings.SelectedSeaEvent
                
                if event == "Sea Beast" then
                    for _, beast in pairs(workspace.SeaBeasts:GetChildren()) do
                        if beast:FindFirstChild("Humanoid") and beast.Humanoid.Health > 0 then
                            repeat
                                task.wait()
                                EquipWeapon()
                                LocalPlayer.Character.HumanoidRootPart.CFrame = beast.HumanoidRootPart.CFrame * CFrame.new(0, 50, 0)
                                _G.Settings.FastAttack = true
                            until not beast.Parent or beast.Humanoid.Health <= 0 or not SeaEventRunning
                            _G.Settings.FastAttack = false
                        end
                    end
                    
                elseif event == "Terror Shark" then
                    for _, shark in pairs(workspace.Enemies:GetChildren()) do
                        if shark.Name == "Terrorshark" and shark:FindFirstChild("Humanoid") and shark.Humanoid.Health > 0 then
                            repeat
                                task.wait()
                                EquipWeapon()
                                LocalPlayer.Character.HumanoidRootPart.CFrame = shark.HumanoidRootPart.CFrame * CFrame.new(0, 50, 0)
                                _G.Settings.FastAttack = true
                            until not shark.Parent or shark.Humanoid.Health <= 0 or not SeaEventRunning
                            _G.Settings.FastAttack = false
                        end
                    end
                    
                elseif event == "Tubar√£o" or event == "Piranha" then
                    for _, fish in pairs(workspace.Enemies:GetChildren()) do
                        if (fish.Name == "Shark" or fish.Name == "Piranha") and fish:FindFirstChild("Humanoid") and fish.Humanoid.Health > 0 then
                            repeat
                                task.wait()
                                EquipWeapon()
                                LocalPlayer.Character.HumanoidRootPart.CFrame = fish.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                                _G.Settings.FastAttack = true
                            until not fish.Parent or fish.Humanoid.Health <= 0 or not SeaEventRunning
                            _G.Settings.FastAttack = false
                        end
                    end
                end
            end)
        end
    end
end)

-- =========================
-- NOTIFICA√á√ÉO INICIAL
-- =========================
task.spawn(function()
    -- Mostrar op√ß√µes ativas
    if configLoaded then
        local activeFeatures = {}
        for k, v in pairs(_G.Settings) do
            if type(v) == "boolean" and v == true then
                local featureName = k:gsub("Auto", ""):gsub("ESP", "")
                table.insert(activeFeatures, featureName)
            end
        end
        
        if #activeFeatures > 0 then
            local message = "Op√ß√µes Ativas:\n" .. table.concat(activeFeatures, ", ")
            Notify(message, 5)
        end
    end
    
    task.wait(configLoaded and 5 or 0.5)
    
    print("=================================")
    print("  LAG TECK HUB v2.0 CARREGADO")
    print("=================================")
    print("‚úÖ SEA: " .. Sea)
    print("‚úÖ Level: " .. LocalPlayer.Data.Level.Value)
    print("‚úÖ Ra√ßa: " .. (LocalPlayer.Data.Race.Value or "N/A"))
    print("‚úÖ Beli: $" .. FormatNumber(LocalPlayer.Data.Beli.Value))
    print("‚úÖ Fragmentos: " .. FormatNumber(LocalPlayer.Data.Fragments.Value))
    print("‚úÖ Discord: discord.gg/RnZ6XHHFj7")
    print("=================================")
    print("üéâ SCRIPT TOTALMENTE CARREGADO!")
    print("=================================")
    
    Notify("‚úÖ Lag Teck Hub v2.0 Carregado!\n\nüéÆ Clique na bolinha para abrir\nüíæ Config " .. (configLoaded and "carregada" or "padr√£o"), 3)
end)

-- =========================
-- FIM DO SCRIPT
-- =========================
print("üéâ LAG TECK HUB v2.0 - TODAS AS 8 PARTES CARREGADAS COM SUCESSO!")

-- =========================
-- CONTROLES DA GUI
-- =========================
Bubble.MouseButton1Click:Connect(function()
    Config.Aberto = not Config.Aberto
    if Config.Aberto then
        Main.Visible = true
        Main.Size = UDim2.fromOffset(0, 0)
        Tween(Main, 0.3, {Size = UDim2.fromOffset(PanelWidth, PanelHeight)})
    else
        Tween(Main, 0.3, {Size = UDim2.fromOffset(0, 0)})
        task.wait(0.35)
        Main.Visible = false
    end
end)

MinBtn.MouseButton1Click:Connect(function()
    Config.Minimizado = true
    Body.Visible = false
    Tween(Main, 0.3, {Size = UDim2.fromOffset(PanelWidth, 50)})
    MinBtn.Visible = false
    MaxBtn.Visible = true
end)

MaxBtn.MouseButton1Click:Connect(function()
    Config.Minimizado = false
    Body.Visible = true
    Tween(Main, 0.3, {Size = UDim2.fromOffset(PanelWidth, PanelHeight)})
    MaxBtn.Visible = false
    MinBtn.Visible = true
end)

CloseBtn.MouseButton1Click:Connect(function()
    Config.Aberto = false
    Tween(Main, 0.3, {Size = UDim2.fromOffset(0, 0)})
    task.wait(0.35)
    Main.Visible = false
end)

-- ARRASTAR
local dragging, dragInput, dragStart, startPos = false

Top.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Main.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- BUSCA
Search:GetPropertyChangedSignal("Text"):Connect(function()
    local searchText = Search.Text:lower()
    for _, tab in pairs(Tabs) do
        for _, item in pairs(tab.Frame:GetChildren()) do
            if item:IsA("Frame") or item:IsA("TextButton") then
                local textLabel = item:FindFirstChildWhichIsA("TextLabel", true)
                if textLabel then
                    item.Visible = searchText == "" or textLabel.Text:lower():find(searchText)
                end
            end
        end
    end
end)

print("‚úÖ HUB CARREGADO COMPLETO!")
